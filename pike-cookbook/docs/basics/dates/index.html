<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-basics/dates" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Dates and Times | Pike Cookbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://TheSmuks.github.io/pike-cookbook/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://TheSmuks.github.io/pike-cookbook/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://TheSmuks.github.io/pike-cookbook/docs/basics/dates"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dates and Times | Pike Cookbook"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/pike-cookbook/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/dates"><link data-rh="true" rel="alternate" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/dates" hreflang="en"><link data-rh="true" rel="alternate" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/dates" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Dates and Times","item":"https://TheSmuks.github.io/pike-cookbook/docs/basics/dates"}]}</script><link rel="stylesheet" href="/pike-cookbook/assets/css/styles.7a9da498.css">
<script src="/pike-cookbook/assets/js/runtime~main.640ae0d4.js" defer="defer"></script>
<script src="/pike-cookbook/assets/js/main.c3b68af9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pike-cookbook/"><div class="navbar__logo"><img src="/pike-cookbook/img/logo.svg" alt="Pike Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pike-cookbook/img/logo.svg" alt="Pike Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pike Cookbook</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pike-cookbook/docs/intro">Cookbook</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/smuks/pike-cookbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pike-cookbook/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/pike-cookbook/docs/basics/strings"><span title="Basic Recipes" class="categoryLinkLabel_W154">Basic Recipes</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/strings"><span title="Strings" class="linkLabel_WmDU">Strings</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/numbers"><span title="Numbers" class="linkLabel_WmDU">Numbers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/arrays"><span title="Arrays" class="linkLabel_WmDU">Arrays</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/hashes"><span title="Hashes" class="linkLabel_WmDU">Hashes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pike-cookbook/docs/basics/dates"><span title="Dates and Times" class="linkLabel_WmDU">Dates and Times</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/pattern-matching"><span title="Pattern Matching" class="linkLabel_WmDU">Pattern Matching</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/subroutines"><span title="Subroutines" class="linkLabel_WmDU">Subroutines</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/files/file-access"><span title="File Operations" class="categoryLinkLabel_W154">File Operations</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/file-access"><span title="File Access" class="linkLabel_WmDU">File Access</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/file-contents"><span title="File Contents" class="linkLabel_WmDU">File Contents</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/directories"><span title="Directories" class="linkLabel_WmDU">Directories</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/database-access"><span title="Database Access" class="linkLabel_WmDU">Database Access</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/network/cgi-programming"><span title="Network &amp; Web" class="categoryLinkLabel_W154">Network &amp; Web</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/cgi-programming"><span title="CGI Programming" class="linkLabel_WmDU">CGI Programming</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/sockets"><span title="Sockets" class="linkLabel_WmDU">Sockets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/web-automation"><span title="Web Automation" class="linkLabel_WmDU">Web Automation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/internet-services"><span title="Internet Services" class="linkLabel_WmDU">Internet Services</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/advanced/classes"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/classes"><span title="Classes and Objects" class="linkLabel_WmDU">Classes and Objects</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/references"><span title="References and Records" class="linkLabel_WmDU">References and Records</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/modules"><span title="Modules and Packages" class="linkLabel_WmDU">Modules and Packages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/processes"><span title="Process Management" class="linkLabel_WmDU">Process Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/user-interfaces"><span title="User Interfaces" class="linkLabel_WmDU">User Interfaces</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pike-cookbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Basic Recipes</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Dates and Times</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dates and Times</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<p>Pike has an extensive Calendar module that provides all manners of manipulating dates and times.</p>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Pike has an extensive Calendar module that provides all manners of</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// manipulating dates and times.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Today is day %d of the current year.\n&quot;, localtime(time())-&gt;yday+1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Today is day 325 of the current year.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Today is day %d of the current year.\n&quot;, Calendar.now()-&gt;year_day());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Today is day 325 of the current year.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="finding-todays-date">Finding Today&#x27;s Date<a href="#finding-todays-date" class="hash-link" aria-label="Direct link to Finding Today&#x27;s Date" title="Direct link to Finding Today&#x27;s Date" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int day, month, year;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping now=localtime(time());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">year  = now-&gt;year+1900;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">month = now-&gt;mon+1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day   = now-&gt;mday;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The current date is %04d %02d %02d\n&quot;, year, month, day);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object now=Calendar.now();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">year  = now-&gt;year_no();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">month = now-&gt;month_no();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day   = now-&gt;month_day();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The current date is %04d %02d %02d\n&quot;, year, month, day);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The current date is %04d %02d %02d\n&quot;, @lambda(){ return ({ now-&gt;year_no(), now-&gt;month_no(), now-&gt;month_day() }); }(Calendar.now()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// this is essentially the same as the respective perl code:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// lambda creates an anonymous function, which in this case takes one argument</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// and returns an array. the array is the spliced into the arguments of write().</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// if the goal is to get by without a temporary variable this is a rather</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// pointless exercise, as there is still a temporary variable (in the function)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// and the temporary function on top of that. more interresting is the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// functional approach aspect.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="converting-dmyhms-to-epoch-seconds">Converting DMYHMS to Epoch Seconds<a href="#converting-dmyhms-to-epoch-seconds" class="hash-link" aria-label="Direct link to Converting DMYHMS to Epoch Seconds" title="Direct link to Converting DMYHMS to Epoch Seconds" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// dwim_time() handles most common date and time formats.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;2:40:25 23.11.2004&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;2:40:25 23.11.2004&quot;)-&gt;unix_time();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 1101174025</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;2:40:25 UTC 23.11.2004&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// faster, because there is no need for guessing:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.parse(&quot;%Y-%M-%D %h:%m:%s %z&quot;,&quot;2004-11-23 2:40:25 UTC&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// without parsing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.Second(2004, 11, 23, 2, 40, 25);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// functional</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.Year(2004)-&gt;month(11)-&gt;day(23)-&gt;hour(2)-&gt;minute(40)-&gt;second(25);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.Day(2004, 11, 23)-&gt;set_timezone(&quot;UTC&quot;)-&gt;hour(2)-&gt;minute(40)-&gt;second(25);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// set a time today</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;2:40:25&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;2:40:25 UTC&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.parse(&quot;%h:%m:%s %z&quot;,&quot;2:40:25 UTC&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.Day()-&gt;set_timezone(&quot;UTC&quot;)-&gt;hour(2)-&gt;minute(40)-&gt;second(25);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 UTC)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="converting-epoch-seconds-to-dmyhms">Converting Epoch Seconds to DMYHMS<a href="#converting-epoch-seconds-to-dmyhms" class="hash-link" aria-label="Direct link to Converting Epoch Seconds to DMYHMS" title="Direct link to Converting Epoch Seconds to DMYHMS" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int unixtime=1101174025;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int day, month, year;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping then=localtime(unixtime);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">year  = then-&gt;year+1900;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">month = then-&gt;mon+1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day   = then-&gt;mday;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Dateline: %02d:%02d:%02d-%04d/%02d/%02d\n&quot;, then-&gt;hour, then-&gt;min, then-&gt;sec, then-&gt;year+1900, then-&gt;mon+1, then-&gt;mday);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Dateline: 02:40:25-2004/11/23</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object othen=Calendar.Second(unixtime);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 23 Nov 2004 2:40:25 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Dateline: %02d:%02d:%02d-%04d/%02d/%02d\n&quot;, othen-&gt;hour_no(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      othen-&gt;minute_no(), othen-&gt;second_no(), othen-&gt;year_no(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      othen-&gt;month_no(), othen-&gt;month_day());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Dateline: 02:40:25-2004/11/23</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="adding-to-or-subtracting-from-a-date">Adding to or Subtracting from a Date<a href="#adding-to-or-subtracting-from-a-date" class="hash-link" aria-label="Direct link to Adding to or Subtracting from a Date" title="Direct link to Adding to or Subtracting from a Date" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int days_offet=55;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int hour_offset=2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int minute_offset=17;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int second_offset=5;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object then=Calendar.parse(&quot;%D/%M/%Y, %h:%m:%s %p&quot;,&quot;18/Jan/1973, 3:45:50 pm&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            +Calendar.Day()*days_offet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            +Calendar.Hour()*hour_offset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            +Calendar.Minute()*minute_offset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            +Calendar.Second()*second_offset;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Then is %s\n&quot;, then-&gt;format_ctime());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Then is Wed Mar 14 18:02:55 1973</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;To be precise: %d:%d:%d, %d/%d/%d\n&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             then-&gt;hour_no(), then-&gt;minute_no(), then-&gt;second_no(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             then-&gt;month_no(), then-&gt;month_day(), then-&gt;year_no());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// To be precise: 18:2:55, 3/14/1973</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int years   = 1973;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int months  = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int days    = 18;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int offset  = 55;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object then = Calendar.Day(years, months, days)+offset;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Nat was 55 days old on: %d/%d/%d\n&quot;, then-&gt;month_no(), then-&gt;month_day(),then-&gt;year_no());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Nat was 55 days old on: 3/14/1973</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="difference-of-two-dates">Difference of Two Dates<a href="#difference-of-two-dates" class="hash-link" aria-label="Direct link to Difference of Two Dates" title="Direct link to Difference of Two Dates" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int bree = 361535725;         // 16 Jun 1981, 4:35:25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int nat  = 96201950;          // 18 Jan 1973, 3:45:50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int difference = bree-nat;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;There were %d seconds between Nat and Bree\n&quot;, difference);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// There were 265333775 seconds between Nat and Bree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int seconds =  difference                % 60;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int minutes = (difference / 60)          % 60;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int hours   = (difference / (60*60) )    % 24;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int days    = (difference / (60*60*24) ) % 7;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int weeks   =  difference / (60*60*24*7);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;(%d weeks, %d days, %d:%d:%d)\n&quot;, weeks, days, hours, minutes, seconds);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// (438 weeks, 4 days, 23:49:35)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object bree = Calendar.dwim_time(&quot;16 Jun 1981, 4:35:25&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Tue 16 Jun 1981 4:35:25 CEST)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object nat  = Calendar.dwim_time(&quot;18 Jan 1973, 3:45:50&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Thu 18 Jan 1973 3:45:50 CET)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object difference = nat-&gt;range(bree);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Thu 18 Jan 1973 3:45:50 CET - Tue 16 Jun 1981 4:35:26 CEST)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;There were %d days between Nat and Bree\n&quot;, difference/Calendar.Day());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// There were 3071 days between Nat and Bree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int days=difference/Calendar.Day();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object left=difference-&gt;add(days,Calendar.Day)-&gt;range(difference-&gt;end());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Calendar handles timezone differences, and since the range crosses from</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// normal to daylight savings time, there is one day which has only 23 hours.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// by adding the number of days we effectively move the beginning of the range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// to the same day as the end, leaving us with a range that is less than a day</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// long. when adding the days, the daylight savings switch will be taken into</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// account.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Bree came %d days, %d:%d:%d after Nat\n&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   days,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   (left/Calendar.Hour())%24,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   (left/Calendar.Minute())%60,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   (left/Calendar.Second())%60,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Bree came 3071 days, 0:49:36 after Nat</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the following is more accurate, taking into account that the days where</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// daylight savings time is switched do not have 24, but 23 and 25 hours.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// thanks to mirar on the pike list for pointing this out and providing a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// correct solution.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) breakdown_elapsed(object u, void|array on)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array res=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (!on) on=({Day,Hour,Minute,Second});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  foreach (on;;program|TimeRange p)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (u==u-&gt;end()) { res+=({0}); continue; }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int x=u/p;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    u=u-&gt;add(x,p)-&gt;range(u-&gt;end());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    res+=({x});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return res;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Bree came %d days, %d:%d:%d after Nat\n&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      @breakdown_elapsed(difference));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Bree came 3071 days, 0:49:36 after Nat</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="day-in-a-weekmonthyear-or-week-number">Day in a Week/Month/Year or Week Number<a href="#day-in-a-weekmonthyear-or-week-number" class="hash-link" aria-label="Direct link to Day in a Week/Month/Year or Week Number" title="Direct link to Day in a Week/Month/Year or Week Number" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping day=localtime(time());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;mday;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;wday;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;yday;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 336</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int year=1981;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int month=6;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int day=16;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object date;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">date = Calendar.Day(year, month, day);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Day(Tue 16 Jun 1981)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">date-&gt;week_day();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">date-&gt;week_no();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">date-&gt;year_day();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 167</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%d/%d/%d was a %s\n&quot;, month, day, year, date-&gt;week_day_name());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 6/16/1981 was a Tuesday</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;in the week number %d.\n&quot;, date-&gt;week_no());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// in the week number 25.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="parsing-dates-and-times-from-strings">Parsing Dates and Times from Strings<a href="#parsing-dates-and-times-from-strings" class="hash-link" aria-label="Direct link to Parsing Dates and Times from Strings" title="Direct link to Parsing Dates and Times from Strings" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">string date = &quot;1998-06-03&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int yyyy;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int mm;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int dd;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[yyyy, mm, dd] = array_sscanf(date, &quot;%d-%d-%d&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object day;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day=Calendar.dwim_day(date);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day=Calendar.parse(&quot;%Y-%M-%D&quot;, date);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;unix_time();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 896824800</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;year_no();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 1998</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;month_no();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">day-&gt;month_day();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 3</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="printing-a-date">Printing a Date<a href="#printing-a-date" class="hash-link" aria-label="Direct link to Printing a Date" title="Direct link to Printing a Date" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">object now=Calendar.dwim_time(&quot;Sun Sep 21 15:33:36 1997&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: Second(Sun 21 Sep 1997 15:33:36 CEST)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ctime();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: &quot;Sun Sep 21 15:33:36 1997\n&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// there is no equivalent to scalar localtime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now = Calendar.Second(1973, 1, 18, 3, 45, 50);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;strftime gives: %s %02d/%02d/%!2d\n&quot;, now-&gt;week_day_name(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        now-&gt;month_no(), now-&gt;month_day(), now-&gt;year_no());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// strftime gives: Sunday 01/18/73</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// pike doesn&#x27;t have strftime, but hey.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// instead Calendar provides a large array of predefined formats:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// format_nice() and format_nicez() depend on the unit:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_nice();           // &quot;18 Jan 1973 3:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;week()-&gt;format_nice();   // &quot;w3 1973&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_nicez();          // &quot;18 Jan 1973 3:45:50 CET&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;hour()-&gt;format_nicez();  // &quot;18 Jan 1973 3:00 CET&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// others are unit independant.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ext_time();       // &quot;Thursday, 18 January 1973 03:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ext_ymd();        // &quot;Thursday, 18 January 1973&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_iso_time();       // &quot;1973-01-18 (Jan) -W03-4 (Thu) 03:45:50 UTC+1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_iso_ymd();        // &quot;1973-01-18 (Jan) -W03-4 (Thu)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_mod();            // &quot;03:45&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_month();          // &quot;1973-01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_month_short();    // &quot;197301&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_mtime();          // &quot;1973-01-18 03:45&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_time();           // &quot;1973-01-18 03:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_time_short();     // &quot;19730118 03:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_time_xshort();    // &quot;730118 03:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_tod();            // &quot;03:45:50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_tod_short();      // &quot;034550&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_todz();           // &quot;03:45:50 CET&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_todz_iso();       // &quot;03:45:50 UTC+1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_week();           // &quot;1973-w3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_week_short();     // &quot;1973w3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_iso_week();       // &quot;1973-W03&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_iso_week_short(); // &quot;197303&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_xtime();          // &quot;1973-01-18 03:45:50.000000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_xtod();           // &quot;03:45:50.000000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ymd();            // &quot;1973-01-18&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ymd_short();      // &quot;19730118&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ymd_xshort();     // &quot;730118&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_ctime();          // &quot;Thu Jan 18 03:45:50 1973\n&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_smtp();           // &quot;Thu, 18 Jan 1973 3:45:50 +0100&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">now-&gt;format_http();           // &quot;Thu, 18 Jan 1973 02:45:50 GMT&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-resolution-timers">High-Resolution Timers<a href="#high-resolution-timers" class="hash-link" aria-label="Direct link to High-Resolution Timers" title="Direct link to High-Resolution Timers" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int t=time();                 // current time in unixtime seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">float t0=time(t);             // higher precision time passed since t</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">float t1=time(t);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">float elapsed=t1-t0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 0.009453</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Press return when ready: &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) before=System.gettimeofday();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stdio.stdin-&gt;gets();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) after=System.gettimeofday();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int elapsed_sec=after[0]-before[0];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int elapsed_usec=after[1]-before[1];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(elapsed_usec&lt;0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  elapsed_sec--;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  elapsed_usec+=1000000;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;You took %d.%d seconds.\n&quot;, elapsed_sec, elapsed_usec);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// this is an expanded example compared to the one given for perl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// to allow comparison of different types.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// bignum are objects of the gmp library, which are seamlessly integrated with</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// regular integers.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // size values are adjusted so that each run takes about the same length.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  gaugethis(5000000, 100, lambda(){ return random(pow(2,31)-1); });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               // values to fit into a signed 32bit int.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  gaugethis(50000, 100, lambda(){ return pow(2,64)+random(pow(2,64)); });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               // make sure values are bignum even in case 64bit ints are used.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  gaugethis(500000, 100, lambda(){ return random_string(10); });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               // might be interresting to compare longer strings too.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void gaugethis(int size, int number_of_times, function rand)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array gauged_times = ({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  float average;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int swidth=sizeof((string)size);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int nwidth=sizeof((string)number_of_times);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for(int i; i&lt;number_of_times; i++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write(&quot;%*d: &quot;, nwidth, i);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    array(int) arr=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write(&quot;creating array: &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    for(int j; j&lt;size; j++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      arr += ({ rand() });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write(&quot; sorting: &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    float gaugetime=gauge // gauge measures cpu time, giving better results</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      arr=sort(arr);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gauged_times += ({ gaugetime });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write(&quot; %f          \r&quot;, gaugetime);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  average=`+(@gauged_times)/(float)number_of_times;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  gauged_times=sort(gauged_times);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  write(&quot;average: %O, min: %O, max: %O                           \n&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        average, gauged_times[0], gauged_times[-1]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="short-sleeps">Short Sleeps<a href="#short-sleeps" class="hash-link" aria-label="Direct link to Short Sleeps" title="Direct link to Short Sleeps" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int abort_on_signal=1;         // if true, aport on signal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sleep(0.25, abort_on_signal);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">delay(0.25); // uses busy-wait for accuracy,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             // may be interrupted by signal handlers</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="program-hopdelta">Program: hopdelta<a href="#program-hopdelta" class="hash-link" aria-label="Direct link to Program: hopdelta" title="Direct link to Program: hopdelta" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Calendar.dwim_time(&quot;Tue, 26 May 1998 23:57:38 -0400&quot;)-&gt;distance(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Calendar.dwim_time(&quot;Wed, 27 May 1998 05:04:03 +0100&quot;))-&gt;format_elapsed();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: &quot;0:06:25&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// &lt;font size=&quot;-1&quot;&gt;&lt;a href=&quot;../include/pike/ch03/hopdelta.html&quot;&gt;download the following standalone program&lt;/a&gt;&lt;/font&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// chapter 3.11</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// hopdelta - feed mail header, produce lines</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//            showing delay at each hop.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  MIME.Message        mail = MIME.Message(Stdio.stdin.read());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array           received = reverse(mail-&gt;headers-&gt;received/&quot;\0&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Calendar.Second lasttime = Calendar.dwim_time(mail-&gt;headers-&gt;date);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array delays=({ ({ &quot;Sender&quot;, &quot;Recipient&quot;, &quot;Time&quot;, &quot;Delta&quot; }) });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  delays+=({ ({ mail-&gt;headers-&gt;from,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                array_sscanf(received[0], &quot;from %[^ ]&quot;)[0],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                mail-&gt;headers-&gt;date,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          }) });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  foreach(received;; string hop)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    string fromby, date;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [fromby, date] = hop/&quot;;&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Calendar.Second thistime = Calendar.dwim_time(date);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    delays+= ({ array_sscanf(fromby, &quot;from %[^ ]%*sby %[^ ]%*s&quot;) +</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ({ date, lasttime-&gt;distance(thistime)-&gt;format_elapsed() })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    lasttime=thistime;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  write(&quot;%{%-=22s %-=22s %-=20s %=10s\n%}\n&quot;, delays);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/smuks/pike-cookbook/tree/main/docs/basics/dates.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pike-cookbook/docs/basics/hashes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hashes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pike-cookbook/docs/basics/pattern-matching"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pattern Matching</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#finding-todays-date" class="table-of-contents__link toc-highlight">Finding Today&#39;s Date</a></li><li><a href="#converting-dmyhms-to-epoch-seconds" class="table-of-contents__link toc-highlight">Converting DMYHMS to Epoch Seconds</a></li><li><a href="#converting-epoch-seconds-to-dmyhms" class="table-of-contents__link toc-highlight">Converting Epoch Seconds to DMYHMS</a></li><li><a href="#adding-to-or-subtracting-from-a-date" class="table-of-contents__link toc-highlight">Adding to or Subtracting from a Date</a></li><li><a href="#difference-of-two-dates" class="table-of-contents__link toc-highlight">Difference of Two Dates</a></li><li><a href="#day-in-a-weekmonthyear-or-week-number" class="table-of-contents__link toc-highlight">Day in a Week/Month/Year or Week Number</a></li><li><a href="#parsing-dates-and-times-from-strings" class="table-of-contents__link toc-highlight">Parsing Dates and Times from Strings</a></li><li><a href="#printing-a-date" class="table-of-contents__link toc-highlight">Printing a Date</a></li><li><a href="#high-resolution-timers" class="table-of-contents__link toc-highlight">High-Resolution Timers</a></li><li><a href="#short-sleeps" class="table-of-contents__link toc-highlight">Short Sleeps</a></li><li><a href="#program-hopdelta" class="table-of-contents__link toc-highlight">Program: hopdelta</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pike-cookbook/docs/intro">Cookbook</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/smuks/pike-cookbook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://pike.lysator.liu.se/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pike Homepage<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>