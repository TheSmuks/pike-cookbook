<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-basics/arrays" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Arrays | Pike Cookbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://TheSmuks.github.io/pike-cookbook/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://TheSmuks.github.io/pike-cookbook/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://TheSmuks.github.io/pike-cookbook/docs/basics/arrays"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Arrays | Pike Cookbook"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/pike-cookbook/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/arrays"><link data-rh="true" rel="alternate" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/arrays" hreflang="en"><link data-rh="true" rel="alternate" href="https://TheSmuks.github.io/pike-cookbook/docs/basics/arrays" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Arrays","item":"https://TheSmuks.github.io/pike-cookbook/docs/basics/arrays"}]}</script><link rel="stylesheet" href="/pike-cookbook/assets/css/styles.7a9da498.css">
<script src="/pike-cookbook/assets/js/runtime~main.640ae0d4.js" defer="defer"></script>
<script src="/pike-cookbook/assets/js/main.c3b68af9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pike-cookbook/"><div class="navbar__logo"><img src="/pike-cookbook/img/logo.svg" alt="Pike Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pike-cookbook/img/logo.svg" alt="Pike Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pike Cookbook</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pike-cookbook/docs/intro">Cookbook</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/smuks/pike-cookbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pike-cookbook/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/pike-cookbook/docs/basics/strings"><span title="Basic Recipes" class="categoryLinkLabel_W154">Basic Recipes</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/strings"><span title="Strings" class="linkLabel_WmDU">Strings</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/numbers"><span title="Numbers" class="linkLabel_WmDU">Numbers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pike-cookbook/docs/basics/arrays"><span title="Arrays" class="linkLabel_WmDU">Arrays</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/hashes"><span title="Hashes" class="linkLabel_WmDU">Hashes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/dates"><span title="Dates and Times" class="linkLabel_WmDU">Dates and Times</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/pattern-matching"><span title="Pattern Matching" class="linkLabel_WmDU">Pattern Matching</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/basics/subroutines"><span title="Subroutines" class="linkLabel_WmDU">Subroutines</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/files/file-access"><span title="File Operations" class="categoryLinkLabel_W154">File Operations</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/file-access"><span title="File Access" class="linkLabel_WmDU">File Access</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/file-contents"><span title="File Contents" class="linkLabel_WmDU">File Contents</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/directories"><span title="Directories" class="linkLabel_WmDU">Directories</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/files/database-access"><span title="Database Access" class="linkLabel_WmDU">Database Access</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/network/cgi-programming"><span title="Network &amp; Web" class="categoryLinkLabel_W154">Network &amp; Web</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/cgi-programming"><span title="CGI Programming" class="linkLabel_WmDU">CGI Programming</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/sockets"><span title="Sockets" class="linkLabel_WmDU">Sockets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/web-automation"><span title="Web Automation" class="linkLabel_WmDU">Web Automation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/network/internet-services"><span title="Internet Services" class="linkLabel_WmDU">Internet Services</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/pike-cookbook/docs/advanced/classes"><span title="Advanced Topics" class="categoryLinkLabel_W154">Advanced Topics</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/classes"><span title="Classes and Objects" class="linkLabel_WmDU">Classes and Objects</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/references"><span title="References and Records" class="linkLabel_WmDU">References and Records</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/modules"><span title="Modules and Packages" class="linkLabel_WmDU">Modules and Packages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/processes"><span title="Process Management" class="linkLabel_WmDU">Process Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pike-cookbook/docs/advanced/user-interfaces"><span title="User Interfaces" class="linkLabel_WmDU">User Interfaces</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pike-cookbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Basic Recipes</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Arrays</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Arrays</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// nested arrays are supported</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array flat = ({ &quot;this&quot;, &quot;that&quot;, &quot;the&quot;, &quot;other&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array nested = ({ &quot;this&quot;, &quot;that&quot;, ({ &quot;the&quot;, &quot;other&quot; }) });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array tune = ({ &quot;The&quot;, &quot;Star-Spangled&quot;, &quot;Banner&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tune[0];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: &quot;The&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tune[1];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: &quot;Star-Spangled&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the typing may be more specific</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// only strings allowed in the array (thus no nesting!)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) flat = ({ &quot;this&quot;, &quot;that&quot;, &quot;the&quot;, &quot;other&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// allow one level of nesting</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string|array(string)) admit1 = ({ &quot;this&quot;, &quot;that&quot;, ({ &quot;the&quot;, &quot;other&quot; }) });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the first level may only contain arrays, other levels may contain anything</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array) require1 ({ ({ &quot;this&quot;, &quot;that&quot; }), ({ &quot;the&quot;, &quot;other&quot; }) });</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="specifying-a-list-in-your-program">Specifying a List In Your Program<a href="#specifying-a-list-in-your-program" class="hash-link" aria-label="Direct link to Specifying a List In Your Program" title="Direct link to Specifying a List In Your Program" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) a = ({ &quot;quick&quot;, &quot;brown&quot;, &quot;fox&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// words</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) a = &quot;Why are you teasing me?&quot;/&quot; &quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// lines</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) lines = #&quot;The boy stood on the burning deck,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">It was as hot as glass.&quot;/&quot;\n&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) bigarray = Stdio.read_file(&quot;mydatafile&quot;)/&quot;\n&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the quoting issues do not apply.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) ships = &quot;Niña Pinta Santa María&quot;/&quot; &quot;;         // wrong</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) ships = ({ &quot;Niña&quot;, &quot;Pinta&quot;, &quot;Santa María&quot; }); // right</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="printing-a-list-with-commas">Printing a List with Commas<a href="#printing-a-list-with-commas" class="hash-link" aria-label="Direct link to Printing a List with Commas" title="Direct link to Printing a List with Commas" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// download the following standalone program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// chapter 4.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// commify_series - show proper comma insertion in list output</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array(string)) lists =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;just one thing&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;Mutt&quot;, &quot;Jeff&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;Peter&quot;, &quot;Paul&quot;, &quot;Mary&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;To our parents&quot;, &quot;Mother Theresa&quot;, &quot;God&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;pastrami&quot;, &quot;ham and cheese&quot;, &quot;peanut butter and jelly&quot;, &quot;tuna&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;recycle tired, old phrases&quot;, &quot;ponder big, happy thoughts&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">({ &quot;recycle tired, old phrases&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;ponder big, happy thoughts&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;sleep and dream peacefully&quot; }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The list is: %s.\n&quot;, commify_list(lists[*])[*]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string commify_list(array(string) list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">switch(sizeof(list))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">case 1: return list[0];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">case 2: return sprintf(&quot;%s and %s&quot;, @list);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">default:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string seperator=&quot;,&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int count;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(count&lt;sizeof(list) &amp;&amp; search(list[count], seperator)==-1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">count++;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(count&lt;sizeof(list))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">seperator=&quot;;&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return sprintf(&quot;%{%s&quot;+seperator+&quot; %}and %s&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list[..sizeof(list)-2], list[-1]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="changing-array-size">Changing Array Size<a href="#changing-array-size" class="hash-link" aria-label="Direct link to Changing Array Size" title="Direct link to Changing Array Size" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">void what_about_that_array(array list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The array now has %d elements.\n&quot;, sizeof(list));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;The index of the last element is %d.\n&quot;, sizeof(list)-1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Element #3 is %O.\n&quot;, list[3]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array people = ({ &quot;Crosby&quot;, &quot;Stills&quot;, &quot;Nash&quot;, &quot;Young&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">what_about_that_array(people);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The array now has 4 elements.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The index of the last element is 3.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Element #3 is &quot;Young&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">people=people[..sizeof(people)-2];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">what_about_that_array(people);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The array now has 3 elements.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The index of the last element is 2.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Index 3 is out of array range -3..2.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">people+=allocate(10001-sizeof(people));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">what_about_that_array(people);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The array now has 10001 elements.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// The index of the last element is 10000.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Element #3 is 0.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array people = ({ &quot;Crosby&quot;, &quot;Stills&quot;, &quot;Nash&quot;, &quot;Young&quot; }); // resetting the array</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">people[10000]=0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Index 10000 is out of array range -4..3.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// accessing a nonexisting index is always an error.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// arrays can not be enlarged this way.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="doing-something-with-every-element-in-a-list">Doing Something with Every Element in a List<a href="#doing-something-with-every-element-in-a-list" class="hash-link" aria-label="Direct link to Doing Something with Every Element in a List" title="Direct link to Doing Something with Every Element in a List" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list; int index; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// do something with item (and possibly index)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(bad_users;; object user)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">complain(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// for such simple cases pike provides a convenient automap feature:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">complain(bad_users[*]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// will do the same as the foreach above.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(sort(indices(getenv()));; string var)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s=%s\n&quot;, var, getenv(var));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// if you don&#x27;t need an assurance that the indices are sorted (they most likely</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// are sorted anyways) you may use:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(getenv(); string var; string value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s=%s\n&quot;, var, value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(all_users;; string user)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int disk_space = get_usage(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(disk_space &gt; MAX_QUOTA)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">complain(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// continue; to jump to the next</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// break; to stop the loop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// redo can be done by doing a loop with the proper checks in the block</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object pipe=Stdio.File();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Process.create_process(({ &quot;who&quot; }), ([ &quot;stdout&quot;:pipe-&gt;pipe() ]));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(pipe-&gt;line_iterator();; string line)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(search(line, &quot;tchrist&quot;)&gt;-1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(line+&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object fh=Stdio.File(&quot;somefile&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(fh-&gt;line_iterator(); int linenr; string line)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(Process.split_quoted_string(line);; string word)//split on whitespace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(reverse(word));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) list = ({ 1,2,3 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; int item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">item--;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%{%d %}\n&quot;, list);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 1 2 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// we can still use foreach instead of for,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// because foreach gives us the index as well:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list; int index;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list[index]--;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%{%d %}\n&quot;, list);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: 0 1 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array a = ({ 0.5, 3 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array b = ({ 0, 1 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// foreach handles only one array so there is nothing to gain here.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// better use automap:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array a_ = a[*]*7;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array b_ = b[*]*7;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%{%O %}\n&quot;, a_+b_);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 3.500000 21 0 7</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string scalar = &quot; abc &quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) list = ({ &quot; a &quot;, &quot; b &quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping(mixed:string) hash = ([ &quot;a&quot;:&quot; a &quot;, &quot;b&quot;:&quot; b &quot; ]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scalar = String.trim_whites(scalar);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list = String.trim_whites(list[*]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(hash; int key;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hash[key]=String.trim_whites(hash[key]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="iterating-over-an-array-by-reference">Iterating Over an Array by Reference<a href="#iterating-over-an-array-by-reference" class="hash-link" aria-label="Direct link to Iterating Over an Array by Reference" title="Direct link to Iterating Over an Array by Reference" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// pike does not distinguish between arrays and array references</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// (they are all references anyways) so this section does not apply</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="extracting-unique-elements-from-a-list">Extracting Unique Elements from a List<a href="#extracting-unique-elements-from-a-list" class="hash-link" aria-label="Direct link to Extracting Unique Elements from a List" title="Direct link to Extracting Unique Elements from a List" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping seen = ([]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array   uniq = ({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!seen[item])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">seen[item] = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uniq += ({ item });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping seen = ([]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array   uniq = ({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!seen[item]++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uniq += ({ item });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping seen = ([]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array   uniq = ({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!seen[item]++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">some_func(item);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the following is probably the most natural for pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping seen = ([]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array   uniq = ({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">seen[item]++;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uniq = indices(seen);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// not necessarily faster but shorter:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array uniq = indices(({ list[*],1 }));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// also short, and preserving the originaal order:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array uniq = list&amp;indices(({ list[*],1 }));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">object pipe = Stdio.File();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Process.create_process(({ &quot;who&quot; }), ([ &quot;stdout&quot;:pipe-&gt;pipe() ]));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping ucnt = ([]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(pipe-&gt;line_iterator();; string line)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ucnt[(line/&quot; &quot;)[0]]++;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array users = sort(indices(ucnt));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;users logged in: %s\n&quot;, users*&quot; &quot;);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="finding-elements-in-one-array-but-not-another">Finding Elements in One Array but Not Another<a href="#finding-elements-in-one-array-but-not-another" class="hash-link" aria-label="Direct link to Finding Elements in One Array but Not Another" title="Direct link to Finding Elements in One Array but Not Another" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// one of pikes strenghts are operators.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// the following are the only idiomatic solutions to the problem</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array A = ({ 1, 2, 3 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array B = ({ 2, 3, 4 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array aonly = A-B;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Result: ({ 1 });</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="computing-union-intersection-or-difference-of-unique-lists">Computing Union, Intersection, or Difference of Unique Lists<a href="#computing-union-intersection-or-difference-of-unique-lists" class="hash-link" aria-label="Direct link to Computing Union, Intersection, or Difference of Unique Lists" title="Direct link to Computing Union, Intersection, or Difference of Unique Lists" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">array a = ({ 1, 3, 5, 6, 7, 8 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array b = ({ 2, 3, 5, 7, 9 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// union:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array union = a|b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ({ 1, 3, 5, 6, 7, 8, 2, 9 })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// intersection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array intersection = a&amp;b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ({ 3, 5, 7 })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// difference</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array difference = a-b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ({ 1, 6, 8 })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// symetric difference</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array symdiff= a^b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ({ 1, 6, 8, 2, 9 })</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="appending-one-array-to-another">Appending One Array to Another<a href="#appending-one-array-to-another" class="hash-link" aria-label="Direct link to Appending One Array to Another" title="Direct link to Appending One Array to Another" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// join arrays</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// appending to an array will always create a new array and pike is designed to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// handle this efficiently.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array members = ({ &quot;Time&quot;, &quot;Flies&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array initiates = ({ &quot;An&quot;, &quot;Arrow&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">members += initiates;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// members is now ({ &quot;Time&quot;, &quot;Flies&quot;, &quot;An&quot;, &quot;Arrow&quot; })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">members = members[..1]+({ &quot;Like&quot; })+members[2..];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s\n&quot;, members*&quot; &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">members[0] = &quot;Fruit&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">members = members[..sizeof(members)-3]+({ &quot;A&quot;, &quot;Banana&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s\n&quot;, members*&quot; &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Time Flies Like An Arrow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Fruit Flies Like A Banana</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reversing-an-array">Reversing an Array<a href="#reversing-an-array" class="hash-link" aria-label="Direct link to Reversing an Array" title="Direct link to Reversing an Array" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// almost any operation you do on the elements will add more overhead than</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// reversing the array, if there is any possible optimization, pike will do it</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// for you.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array reversed = reverse(arr);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// unless you were going to use for anyways then foreach(reverse( ...)) is</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// preferable.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(reverse(arr);; mixed item)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// do something with item</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for(int i=sizeof(arr)-1; i&lt;=0; i--)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// so something with arr[i]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array ascending = sort(users);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array descending = reverse(sort(users));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// reverse(sort()) is faster by a magnitude</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array descending = Array.sort_array(users, lambda(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return a&lt;b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="processing-multiple-elements-of-an-array">Processing Multiple Elements of an Array<a href="#processing-multiple-elements-of-an-array" class="hash-link" aria-label="Direct link to Processing Multiple Elements of an Array" title="Direct link to Processing Multiple Elements of an Array" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">array arr = ({ 0,1,2,3,4,5,6,7,8,9 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int n=3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array front = arr[..n-1];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">arr = arr[n..];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array back = arr[sizeof(arr)-n..];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">arr = arr[..sizeof(arr)-(n+1)];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// since new arrays are created if elements are added or removed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// shift and pop are not usefull here.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// if you need shift and pop capabilities use the ADT classes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array shift2(ADT.Queue queue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return ({ queue-&gt;read(), queue-&gt;read() });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.Queue friends = ADT.Queue(&quot;Peter&quot;, &quot;Paul&quot;, &quot;Mary&quot;, &quot;Jim&quot;, &quot;Tim&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string this, that;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[this, that] = shift2(friends);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// this contains Peter, that has Paul, and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// friends has Mary, Jim, and Tim</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.Stack beverages = ADT.Stack();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">beverages-&gt;set_stack(({ &quot;Dew&quot;, &quot;Jolt&quot;, &quot;Cola&quot;, &quot;Sprite&quot;, &quot;Fresca&quot; }));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array pair = beverages-&gt;pop(2); // implementing pop2 would gain nothing here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// pair[0] contains Sprite, pair[1] has Fresca,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// and beverages has (Dew, Jolt, Cola)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// to be able to shift and pop on the same list use the following:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array shift2(ADT.CircularList list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return ({ list-&gt;pop_front(), list-&gt;pop_front() });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array pop2(ADT.CircularList list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return reverse( ({ list-&gt;pop_back(), list-&gt;pop_back() }) );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.CircularList friends = ADT.CircularList( ({&quot;Peter&quot;, &quot;Paul&quot;, &quot;Mary&quot;, &quot;Jim&quot;, &quot;Tim&quot;}) );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string this, that;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[this, that] = shift2(friends);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// this contains Peter, that has Paul, and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// friends has Mary, Jim, and Tim</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.CircularList beverages = ADT.CircularList( ({ &quot;Dew&quot;, &quot;Jolt&quot;, &quot;Cola&quot;, &quot;Sprite&quot;, &quot;Fresca&quot; }) );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array pair = pop2(beverates);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// pair[0] contains Sprite, pair[1] has Fresca,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// and beverages has (Dew, Jolt, Cola)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="finding-the-first-list-element-that-passes-a-test">Finding the First List Element That Passes a Test<a href="#finding-the-first-list-element-that-passes-a-test" class="hash-link" aria-label="Direct link to Finding the First List Element That Passes a Test" title="Direct link to Finding the First List Element That Passes a Test" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mixed match = search(arr, element);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int test(mixed element)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(sizeof(element)==5)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mixed match = Array.search_array(arr, test);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(match != -1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// do something with arr[match]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// do something else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// another convenient way if you do many tests on the same list,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// and you do not care for the position is:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if( (multiset)arr[element] )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// found</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// not found</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="finding-all-elements-in-an-array-matching-certain-criteria">Finding All Elements in an Array Matching Certain Criteria<a href="#finding-all-elements-in-an-array-matching-certain-criteria" class="hash-link" aria-label="Direct link to Finding All Elements in an Array Matching Certain Criteria" title="Direct link to Finding All Elements in an Array Matching Certain Criteria" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">array matching=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(list;; mixed element)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(test(element))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">matching+=({ element });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array matching = map(list, test)-({ 0 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array matching = test(list[*])-({ 0 });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// apply test() on each element in list, collect the results, and remove</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// results that are 0.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sorting-an-array-numerically">Sorting an Array Numerically<a href="#sorting-an-array-numerically" class="hash-link" aria-label="Direct link to Sorting an Array Numerically" title="Direct link to Sorting an Array Numerically" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// since pike has different types for strings and numbers, ints and floats are</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// of course sorted numerically</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// (sort() is destructive, the original array is changed)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) unsorted = ...;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(int) sorted = sort(unsorted);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// but suppose you want to sort an array of strings by their numeric value then</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// things get a bit more interresting:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) unsorted = ({ &quot;123asdf&quot;, &quot;3poiu&quot;, &quot;23qwert&quot;, &quot;3ayxcv&quot; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort((array(int))unsorted, unsorted);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// unsorted is now sorted.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sorting-a-list-by-computable-field">Sorting a List by Computable Field<a href="#sorting-a-list-by-computable-field" class="hash-link" aria-label="Direct link to Sorting a List by Computable Field" title="Direct link to Sorting a List by Computable Field" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">array unordered;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int compare(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// return comparison of a and b</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array ordered = Array.sort_array(unordered, compare);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int compute(mixed element)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// return computation from element</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array precomputed = map(unordered, compute);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(precomputed, unordered); // will destructively sort unordered in the same</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array ordered = unordered;    // manner as precomputed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(map(unordered, compute), unordered); // without a temp variable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(compute(unordered[*]), unordered);   // using the automap operator</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// both get compiled to the same code</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array ordered = sort(employees, lambda(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return a-&gt;name &gt; b-&gt;name;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(Array.sort_array(employees,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lambda(mixed a, mixed b){ return a-&gt;name &gt; b-&gt;name; })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;; mixed employee)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s earns $%d\n&quot;, employee-&gt;name, employee-&gt;salary);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array ordered_employees =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Array.sort_array(employees,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lambda(mixed a, mixed b){ return a-&gt;name &gt; b-&gt;name; });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(ordered_employees;; mixed employee)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s earns $%d\n&quot;, employee-&gt;name, employee-&gt;salary);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping bonus;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(ordered_employees;; mixed employee)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// you are not supposed to use the social security number as an id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(bonus[employee-&gt;id])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s got a bonus!\n&quot;, employee-&gt;name);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted = Array.sort_array(employees,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lambda(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(a-&gt;name!=b-&gt;name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return (a-&gt;name &lt; b-&gt;name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return (b-&gt;age &lt; a-&gt;age);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array) users = System.get_all_users();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(users);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// System.get_all_users() returns an array of arrays, with the name as the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// first element in each inner array, sort handles multidimensional arrays, so</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// we can skip creating our own sort function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// if we wanted to sort on something else one could rearrange the array:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array user;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(user=System.getpwent())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users += ({ user[2], user });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">System.endpwent();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(users);  // now we are sorting by uid.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// alternative:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array) users = System.get_all_users();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(users[*][2], users);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(users[*][0]*&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array names;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted = Array.sort_array(names, lambda(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return a[1] &lt; b[1];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// faster:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(names[*][1], names);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sorted=names;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted = Array.sort_array(strings, lambda(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return sizeof(a) &lt; sizeof(b);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// faster:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(sizeof(strings[*]), strings);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sorted=strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array temp = map(strings, sizeof);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(temp, strings);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted = strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(map(strings, sizeof), strings);   // pick one</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(sizeof(strings[*]), strings);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sorted=strings;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array fields;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array temp = map(fields, array_sscanf, &quot;%*s%d%*s&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(temp, fields);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted_fields=fields;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort(array_sscanf(fields[*], &quot;%*s%d%*s&quot;), fields);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted_fields=fields;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array passwd_lines = (Stdio.read_file(&quot;/etc/passwd&quot;)/&quot;\n&quot;)-({&quot;&quot;});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array) passwd = passwd_lines[*]/&quot;:&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int compare(mixed a, mixed b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(a[3]!=b[3])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return (int)a[3]&lt;(int)b[3];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(a[2]!=b[2])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return (int)a[2]&lt;(int)b[2];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return a[0]&lt;b[0];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array sorted_passwd = Array.sort_array(passwd, compare);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// alternatively the following uses the builtin sort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort( passwd[*][0], passwd);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort( ((array(int))passwd[*][2]), passwd);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sort( ((array(int))passwd[*][3]), passwd);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementing-a-circular-list">Implementing a Circular List<a href="#implementing-a-circular-list" class="hash-link" aria-label="Direct link to Implementing a Circular List" title="Direct link to Implementing a Circular List" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.CircularList circular;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circular-&gt;push_front(circular-&gt;pop_back());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circular-&gt;push_back(circular-&gt;pop_front());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mixed grab_and_rotate(ADT.CircularList list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mixed element = list-&gt;pop_front();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list-&gt;push_back(element);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return element;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ADT.CircularList processes = ADT.CircularList( ({ 1, 2, 3, 4, 5 }) );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int process = grab_and_rotate(processes);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;Handling process %d\n&quot;, process);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sleep(1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="randomizing-an-array">Randomizing an Array<a href="#randomizing-an-array" class="hash-link" aria-label="Direct link to Randomizing an Array" title="Direct link to Randomizing an Array" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">array arr;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Array.shuffle(arr);  // this uses the fisher-yates shuffle</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// being creative with the algorithm, this is not as memory efficient,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// but it shows the utility of multisets.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array set_shuffle(array list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">multiset elements=(multiset)list;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list=({});                     // reset the list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(sizeof(elements))        // while we still have elements left</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mixed pick=random(elements); // pick a random element</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list+=({ pick });            // add it to the new list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">elements[pick]--;            // remove the element we picked</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return list;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array list;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">list=set_shuffle(list);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">inherit &quot;mjd_permute&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int permutations = factorial(sizeof(list));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array shuffle = list[n2perm(random(permutations)+1, sizeof(list))[*]];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void naive_shuffle(array list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for(int i=0; i&lt;sizeof(list); i++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int j=random(sizeof(list)-1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ list[i], list[j] ] = ({ list[j], list[i] });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="program-words">Program: words<a href="#program-words" class="hash-link" aria-label="Direct link to Program: words" title="Direct link to Program: words" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// download the following standalone program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// section 4.18 example 4.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// words - gather lines, present in columns</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array words=Stdio.stdin.read()/&quot;\n&quot;;   // get all input</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int maxlen=sort(sizeof(words[*]))[-1]; // sort by size and pick the largest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">maxlen++;                              // add space</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// get boundaries, this should be portable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int cols = Stdio.stdout-&gt;tcgetattr()-&gt;columns/maxlen;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int rows = (sizeof(words)/cols) + 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string mask=&quot;%{%-&quot;+maxlen+&quot;s%}\n&quot;;     // compute format</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">words=Array.transpose(words/rows);     // split into groups as large as the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// number of rows and then transpose</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(mask, words[*]);                 // apply mask to each group</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="program-permute">Program: permute<a href="#program-permute" class="hash-link" aria-label="Direct link to Program: permute" title="Direct link to Program: permute" translate="no">​</a></h2>
<div class="language-pike codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pike codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">int factorial(int n)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int s=1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(n)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">s*=n--;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return s;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%d\n&quot;, factorial(500));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Using Array.permute() to generate all permutations</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// -------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Example: Generate all permutations of an array using Array.permute()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Note: Array.permute() returns all possible orderings of array elements</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import Array;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Simple permutation example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(string) fruits = ({&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array(array(string)) perms = permute(fruits);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(perms, array(string) p)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(&quot;%s\n&quot;, p*&quot;, &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Output:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// apple, banana, cherry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// apple, cherry, banana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// banana, apple, cherry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// banana, cherry, apple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// cherry, apple, banana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// cherry, banana, apple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// download the following standalone program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">string line;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(line=Stdio.stdin-&gt;gets())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">permute(line/&quot; &quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void permute(array items, array|void perms)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!perms)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">perms=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!sizeof(items))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write((perms*&quot; &quot;)+&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">foreach(items; int i;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array newitems=items[..i-1]+items[i+1..];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array newperms=items[i..i]+perms;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">permute(newitems, newperms);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//-------------------------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// download the following standalone program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/pike</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mapping fact=([ 1:1 ]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int factorial(int n)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(!fact[n])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fact[n]=n*factorial(n-1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return fact[n];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array n2pat(int N, int len)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int i=1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array pat=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(i &lt;= len)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pat += ({ N%i });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">N/=i;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">i++;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return pat;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array pat2perm(array pat)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array source=indices(pat);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array perm=({});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(sizeof(pat))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">perm += ({ source[pat[-1]] });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">source = source[..pat[-1]-1]+source[pat[-1]+1..];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pat=pat[..sizeof(pat)-2];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return perm;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array n2perm(int N, int len)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return pat2perm(n2pat(N, len));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void main()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array data;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while(data=Stdio.stdin-&gt;gets()/&quot; &quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int num_permutations = factorial(sizeof(data));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for(int i; i&lt;num_permutations; i++)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">array permutation = data[n2perm(i, sizeof(data))[*]];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">write(permutation*&quot; &quot;+&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/smuks/pike-cookbook/tree/main/docs/basics/arrays.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pike-cookbook/docs/basics/numbers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Numbers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pike-cookbook/docs/basics/hashes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hashes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#specifying-a-list-in-your-program" class="table-of-contents__link toc-highlight">Specifying a List In Your Program</a></li><li><a href="#printing-a-list-with-commas" class="table-of-contents__link toc-highlight">Printing a List with Commas</a></li><li><a href="#changing-array-size" class="table-of-contents__link toc-highlight">Changing Array Size</a></li><li><a href="#doing-something-with-every-element-in-a-list" class="table-of-contents__link toc-highlight">Doing Something with Every Element in a List</a></li><li><a href="#iterating-over-an-array-by-reference" class="table-of-contents__link toc-highlight">Iterating Over an Array by Reference</a></li><li><a href="#extracting-unique-elements-from-a-list" class="table-of-contents__link toc-highlight">Extracting Unique Elements from a List</a></li><li><a href="#finding-elements-in-one-array-but-not-another" class="table-of-contents__link toc-highlight">Finding Elements in One Array but Not Another</a></li><li><a href="#computing-union-intersection-or-difference-of-unique-lists" class="table-of-contents__link toc-highlight">Computing Union, Intersection, or Difference of Unique Lists</a></li><li><a href="#appending-one-array-to-another" class="table-of-contents__link toc-highlight">Appending One Array to Another</a></li><li><a href="#reversing-an-array" class="table-of-contents__link toc-highlight">Reversing an Array</a></li><li><a href="#processing-multiple-elements-of-an-array" class="table-of-contents__link toc-highlight">Processing Multiple Elements of an Array</a></li><li><a href="#finding-the-first-list-element-that-passes-a-test" class="table-of-contents__link toc-highlight">Finding the First List Element That Passes a Test</a></li><li><a href="#finding-all-elements-in-an-array-matching-certain-criteria" class="table-of-contents__link toc-highlight">Finding All Elements in an Array Matching Certain Criteria</a></li><li><a href="#sorting-an-array-numerically" class="table-of-contents__link toc-highlight">Sorting an Array Numerically</a></li><li><a href="#sorting-a-list-by-computable-field" class="table-of-contents__link toc-highlight">Sorting a List by Computable Field</a></li><li><a href="#implementing-a-circular-list" class="table-of-contents__link toc-highlight">Implementing a Circular List</a></li><li><a href="#randomizing-an-array" class="table-of-contents__link toc-highlight">Randomizing an Array</a></li><li><a href="#program-words" class="table-of-contents__link toc-highlight">Program: words</a></li><li><a href="#program-permute" class="table-of-contents__link toc-highlight">Program: permute</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pike-cookbook/docs/intro">Cookbook</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/smuks/pike-cookbook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://pike.lysator.liu.se/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pike Homepage<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>