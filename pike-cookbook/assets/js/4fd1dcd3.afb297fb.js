"use strict";(self.webpackChunkpike_cookbook=self.webpackChunkpike_cookbook||[]).push([[576],{6938(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"basics/pattern-matching","title":"Pattern Matching","description":"Introduction","source":"@site/docs/basics/pattern-matching.md","sourceDirName":"basics","slug":"/basics/pattern-matching","permalink":"/pike-cookbook/docs/basics/pattern-matching","draft":false,"unlisted":false,"editUrl":"https://github.com/smuks/pike-cookbook/tree/main/docs/basics/pattern-matching.md","tags":[],"version":"current","frontMatter":{"id":"pattern-matching","title":"Pattern Matching","sidebar_label":"Pattern Matching"},"sidebar":"tutorialSidebar","previous":{"title":"Dates and Times","permalink":"/pike-cookbook/docs/basics/dates"},"next":{"title":"Subroutines","permalink":"/pike-cookbook/docs/basics/subroutines"}}');var r=i(4848),a=i(8453);const s={id:"pattern-matching",title:"Pattern Matching",sidebar_label:"Pattern Matching"},c="Pattern Matching",o={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Copying and Substituting Simultaneously",id:"copying-and-substituting-simultaneously",level:2},{value:"Recipe 6.1: Simple Substitution - Modern Approach",id:"recipe-61-simple-substitution---modern-approach",level:3},{value:"Recipe 6.2: Extract Basename (Strip Directory)",id:"recipe-62-extract-basename-strip-directory",level:3},{value:"Recipe 6.3: Capitalize Words with Callback",id:"recipe-63-capitalize-words-with-callback",level:3},{value:"Matching Letters",id:"matching-letters",level:2},{value:"Recipe 6.4: Matching Letters (Character Classes)",id:"recipe-64-matching-letters-character-classes",level:3},{value:"Recipe 6.5: Matching Words with Word Boundaries",id:"recipe-65-matching-words-with-word-boundaries",level:3},{value:"Pattern Matching with Fuzzy Logic",id:"pattern-matching-with-fuzzy-logic",level:2},{value:"Recipe 6.6: Fuzzy String Matching",id:"recipe-66-fuzzy-string-matching",level:3},{value:"Recipe 6.7: Phonetic Matching with Soundex",id:"recipe-67-phonetic-matching-with-soundex",level:3},{value:"Regular Expression Advanced Features",id:"regular-expression-advanced-features",level:2},{value:"Recipe 6.8: Matching Multiple Lines",id:"recipe-68-matching-multiple-lines",level:3},{value:"Recipe 6.9: Greedy and Non-Greedy Matches",id:"recipe-69-greedy-and-non-greedy-matches",level:3},{value:"Recipe 6.10: Capturing Groups",id:"recipe-610-capturing-groups",level:3},{value:"Pattern Matching Utilities",id:"pattern-matching-utilities",level:2},{value:"Recipe 6.11: Common Prefix Finding",id:"recipe-611-common-prefix-finding",level:3},{value:"Recipe 6.12: String Distance and Similarity",id:"recipe-612-string-distance-and-similarity",level:3},{value:"Recipe 6.13: Pattern Validation",id:"recipe-613-pattern-validation",level:3},{value:"Recipe 6.14: Advanced String Processing",id:"recipe-614-advanced-string-processing",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"pattern-matching",children:"Pattern Matching"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:"// Pattern Matching with Pike 8\n// Modern implementation using String.pmod and Regexp\n// Comprehensive pattern matching solutions\n\n// Modern string imports for advanced pattern matching\nimport String;\nimport Array;\n\n// String utilities for modern pattern matching\nconstant Buffer = __builtin.Buffer;\nconstant Iterator = __builtin.string_iterator;\nconstant SplitIterator = __builtin.string_split_iterator;\nconstant fuzzymatch = String.fuzzymatch;\nconstant levenshtein_distance = String.levenshtein_distance;\nconstant soundex = String.soundex;\nconstant common_prefix = String.common_prefix;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"copying-and-substituting-simultaneously",children:"Copying and Substituting Simultaneously"}),"\n",(0,r.jsx)(n.h3,{id:"recipe-61-simple-substitution---modern-approach",children:"Recipe 6.1: Simple Substitution - Modern Approach"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.1: Simple Substitution - Modern Approach\n//-----------------------------\nstring src = "This is a test string";\nstring dst;\n\n// Method 1: Using String.replace() - more efficient than regex for simple cases\ndst = replace(src, (["test": "replacement"]));\n// "This is a replacement string"\n\n// Method 2: Using Regexp for complex pattern matching\ndst = Regexp("this")->replace(src, "that");\n// "that is a test string" (case-sensitive)\n\n// Method 3: Case-insensitive replacement with Regexp\ndst = Regexp("(?i)this")->replace(src, "that");\n// "that is a test string" (case-insensitive)\n\n//-----------------------------\n// Recipe 6.2: Extract Basename (Strip Directory)\n//-----------------------------\nstring path = "/home/user/document.txt";\n\n// Modern approach: Using String manipulation (more efficient)\narray(string) parts = path"/";\nstring basename = parts[-1];\n// "document.txt"\n\n// Alternative: Using regex for complex path patterns\nstring basename_regex = Regexp("^.*/")->replace(path, "");\n// "document.txt"\n\n//-----------------------------\n// Recipe 6.3: Capitalize Words with Callback\n//-----------------------------\nstring capword = Regexp("[a-z]+")->replace\n        ("foo.bar",\n            lambda(string c) {\n                return capitalize(c);\n            } );\n// "Foo.Bar"\n\n// Using String.pmod function for better word capitalization\nstring title_case = sillycaps("foo bar");\n// "Foo Bar"\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-62-extract-basename-strip-directory",children:"Recipe 6.2: Extract Basename (Strip Directory)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.2: Extract Basename (Strip Directory)\n//-----------------------------\nstring path = "/home/user/document.txt";\n\n// Modern approach: Using String manipulation (more efficient)\narray(string) parts = path"/";\nstring basename = parts[-1];\n// "document.txt"\n\n// Alternative: Using regex for complex path patterns\nstring basename_regex = Regexp("^.*/")->replace(path, "");\n// "document.txt"\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-63-capitalize-words-with-callback",children:"Recipe 6.3: Capitalize Words with Callback"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.3: Capitalize Words with Callback\n//-----------------------------\nstring capword = Regexp("[a-z]+")->replace\n        ("foo.bar",\n            lambda(string c) {\n                return capitalize(c);\n            } );\n// "Foo.Bar"\n\n// Using String.pmod function for better word capitalization\nstring title_case = sillycaps("foo bar");\n// "Foo Bar"\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h2,{id:"matching-letters",children:"Matching Letters"}),"\n",(0,r.jsx)(n.h3,{id:"recipe-64-matching-letters-character-classes",children:"Recipe 6.4: Matching Letters (Character Classes)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.4: Matching Letters (Character Classes)\n//-----------------------------\n\nstring text = "Hello World 123!";\n\n// Extract all letters (alphabetic characters)\nstring letters = Regexp("[a-zA-Z]+")->match(text);\n// "HelloWorld" (first match)\n\n// Find all letters using split and filter\narray(string) all_letters = filter(text/"" , lambda(string c) {\n    return c >= \'a\' && c <= \'z\' ||\n           c >= \'A\' && c <= \'Z\';\n}*"" ;\n// "HelloWorld"\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-65-matching-words-with-word-boundaries",children:"Recipe 6.5: Matching Words with Word Boundaries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.5: Matching Words with Word Boundaries\n//-----------------------------\n\nstring sentence = "The quick brown fox jumps over the lazy dog";\n\n// Find words starting with \'q\'\narray(string) q_words = Regexp("\\bq\\w*")->match(sentence);\n// ({ "quick" }) (first match)\n\n// Extract all words using modern string splitting\narray(string) words = normalize_space(sentence)/" ";\n// ({ "The", "quick", "brown", "fox", "jumps", "over", "the", "lazy", "dog" })\n\n// Find words with specific patterns\narray(string) long_words = filter(words, lambda(string word) {\n    return sizeof(word) > 4;\n});\n// ({ "quick", "brown", "jumps" })\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h2,{id:"pattern-matching-with-fuzzy-logic",children:"Pattern Matching with Fuzzy Logic"}),"\n",(0,r.jsx)(n.h3,{id:"recipe-66-fuzzy-string-matching",children:"Recipe 6.6: Fuzzy String Matching"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.6: Fuzzy String Matching\n//-----------------------------\n\nstring target = "programming";\narray(string) candidates = ({\n    "programming", "programing", "progamming",\n    "codding", "development", "writing"\n});\n\n// Calculate similarity scores using fuzzymatch\narray(int) scores = map(candidates, lambda(string candidate) {\n    return fuzzymatch(target, candidate);\n});\n\n// Find matches above threshold (80% similarity)\narray(string) good_matches = filter(candidates, lambda(string candidate, int index) {\n    return scores[index] >= 80;\n});\n\n// Sort by similarity score\narray(string) sorted_matches = sort(good_matches, lambda(string a, string b) {\n    return fuzzymatch(target, b) - fuzzymatch(target, a);\n});\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-67-phonetic-matching-with-soundex",children:"Recipe 6.7: Phonetic Matching with Soundex"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.7: Phonetic Matching with Soundex\n//-----------------------------\n\narray(string) names = ({\n    "Robert", "Rupert", "Rubin",\n    "Smith", "Smythe", "Smyth"\n});\n\n// Group names by Soundex code\nmapping(string:array(string)) soundex_groups = ([]);\nforeach (names, string name) {\n    string code = soundex(name);\n    if (!soundex_groups[code])\n        soundex_groups[code] = ({});\n    soundex_groups[code] += ({name});\n}\n\n// Output Soundex groups\nforeach (soundex_groups; string code; array(string) group) {\n    write("Soundex %s: %s\\n", code, implode_nicely(group));\n}\n// Soundex R163: Robert, Rupert, Rubin\n// Soundex S530: Smith, Smythe, Smyth\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h2,{id:"regular-expression-advanced-features",children:"Regular Expression Advanced Features"}),"\n",(0,r.jsx)(n.h3,{id:"recipe-68-matching-multiple-lines",children:"Recipe 6.8: Matching Multiple Lines"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.8: Matching Multiple Lines\n//-----------------------------\n\nstring multiline_text = "First line\\nSecond line\\nThird line";\n\n// Extract lines containing specific pattern\narray(string) matching_lines = Regexp("line.*\\n")->match(multiline_text);\n// ({ "First line\\n", "Second line\\n", "Third line" })\n\n// Process line by line using modern iteration\narray(string) processed_lines = map(multiline_text"\\n", lambda(string line) {\n    return if(Regexp("line")->match(line),\n              capitalize(line),\n              line);\n});\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-69-greedy-and-non-greedy-matches",children:"Recipe 6.9: Greedy and Non-Greedy Matches"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.9: Greedy and Non-Greedy Matches\n//-----------------------------\n\nstring html = "<div>Content</div><div>More content</div>";\n\n// Greedy match (default)\narray(string) greedy_matches = Regexp("<div>.*</div>")->match(html);\n// ({ "<div>Content</div><div>More content</div>" })\n\n// Non-greedy match\narray(string) nongreedy_matches = Regexp("<div>.*?</div>")->match(html);\n// ({ "<div>Content</div>", "<div>More content</div>" })\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-610-capturing-groups",children:"Recipe 6.10: Capturing Groups"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.10: Capturing Groups\n//-----------------------------\n\nstring log_entry = "192.168.1.1 - - [01/Jan/2023:12:00:00 +0000] \\"GET /index.html HTTP/1.1\\" 200 1024";\n\n// Extract IP address and timestamp using capturing groups\narray(string) matches = Regexp("^(\\\\d+\\\\.\\\\d+\\\\.\\\\d+\\\\.\\\\d+).*\\\\[([^\\\\]]+)\\\\].*\\"(\\\\w+) (.*) HTTP")->match(log_entry);\n\nif (matches && sizeof(matches) > 3) {\n    string ip = matches[1];\n    string timestamp = matches[2];\n    string method = matches[3];\n    string path = matches[4];\n\n    write("IP: %s, Method: %s, Path: %s\\n", ip, method, path);\n}\n// IP: 192.168.1.1, Method: GET, Path: /index.html\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h2,{id:"pattern-matching-utilities",children:"Pattern Matching Utilities"}),"\n",(0,r.jsx)(n.h3,{id:"recipe-611-common-prefix-finding",children:"Recipe 6.11: Common Prefix Finding"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.11: Common Prefix Finding\n//-----------------------------\n\narray(string) strings = ({\n    "apple", "apricot", "april", "apology"\n});\n\nstring prefix = common_prefix(strings);\n// "ap"\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-612-string-distance-and-similarity",children:"Recipe 6.12: String Distance and Similarity"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.12: String Distance and Similarity\n//-----------------------------\n\nstring s1 = "kitten";\nstring s2 = "sitting";\n\n// Calculate Levenshtein distance\nint distance = levenshtein_distance(s1, s2);\n// 3 (kitten \u2192 sitten \u2192 sittin \u2192 sitting)\n\n// Calculate similarity percentage\nint similarity = fuzzymatch(s1, s2);\n// 73 (based on normalized distance)\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-613-pattern-validation",children:"Recipe 6.13: Pattern Validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.13: Pattern Validation\n//-----------------------------\n\nbool validate_email(string email) {\n    return Regexp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$")\n           ->match(email) != 0;\n}\n\nbool validate_url(string url) {\n    return Regexp("^https?://[^\\\\s/$.?#].[^\\\\s]*$")\n           ->match(url) != 0;\n}\n\n// Test validation functions\nwrite("Email valid: %d\\n", validate_email("test@example.com"));\nwrite("URL valid: %d\\n", validate_url("https://pike.ida.liu.se"));\n\n//-----------------------------\n'})}),"\n",(0,r.jsx)(n.h3,{id:"recipe-614-advanced-string-processing",children:"Recipe 6.14: Advanced String Processing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recipe 6.14: Advanced String Processing\n//-----------------------------\n\n// Using String iterators for efficient processing\nstring text = "Hello, world!";\nString.Iterator it = Iterator(text);\n\nstring result = "";\nwhile (it->index() < sizeof(it->value())) {\n    string c = it->value()[it->index()];\n    if (c != \',\' && c != \'!\')\n        result += c;\n    it->next();\n}\n\n// Using Buffer for efficient string building\nBuffer buf = Buffer();\nbuf->add("Processed: ");\nbuf->add(result);\n\nwrite("%s\\n", buf->get());\n// "Processed: Hello world"\n\n//-----------------------------\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>c});var t=i(6540);const r={},a=t.createContext(r);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);