"use strict";(self.webpackChunkpike_cookbook=self.webpackChunkpike_cookbook||[]).push([[298],{161(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"advanced/modules","title":"Modules and Packages","description":"Introduction","source":"@site/docs/advanced/modules.md","sourceDirName":"advanced","slug":"/advanced/modules","permalink":"/pike-cookbook/docs/advanced/modules","draft":false,"unlisted":false,"editUrl":"https://github.com/smuks/pike-cookbook/tree/main/docs/advanced/modules.md","tags":[],"version":"current","frontMatter":{"id":"modules","title":"Modules and Packages","sidebar_label":"Modules and Packages"},"sidebar":"tutorialSidebar","previous":{"title":"References and Records","permalink":"/pike-cookbook/docs/advanced/references"},"next":{"title":"Process Management","permalink":"/pike-cookbook/docs/advanced/processes"}}');var r=t(4848),a=t(8453);const s={id:"modules",title:"Modules and Packages",sidebar_label:"Modules and Packages"},o="Packages, Libraries, and Modules",l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Defining a Module&#39;s Interface",id:"defining-a-modules-interface",level:2},{value:"Creating Hierarchical Modules",id:"creating-hierarchical-modules",level:2},{value:"Dynamic Module Loading with master()-&gt;resolv()",id:"dynamic-module-loading-with-master-resolv",level:2},{value:"Making Variables Private to a Module",id:"making-variables-private-to-a-module",level:2},{value:"Controlling Module Symbol Visibility",id:"controlling-module-symbol-visibility",level:2},{value:"AutoDoc Documentation System",id:"autodoc-documentation-system",level:2},{value:"Pike 8 Standard Library Modules",id:"pike-8-standard-library-modules",level:2},{value:"ADT (Abstract Data Types):",id:"adt-abstract-data-types",level:3},{value:"Sql Module - Database Connectivity:",id:"sql-module---database-connectivity",level:3},{value:"Protocols Module - Network Protocols:",id:"protocols-module---network-protocols",level:3},{value:"Module Dependencies and Versioning",id:"module-dependencies-and-versioning",level:2},{value:"Best Practices for Module Organization",id:"best-practices-for-module-organization",level:2},{value:"Complete Module Example: Logger",id:"complete-module-example-logger",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"packages-libraries-and-modules",children:"Packages, Libraries, and Modules"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(n.p,{children:["Pike 8 provides a powerful module system for organizing code into reusable libraries. Modules are stored in files with the ",(0,r.jsx)(n.code,{children:".pmod"})," extension and can contain functions, classes, constants, and other modules."]}),"\n",(0,r.jsx)(n.p,{children:"Key features of Pike 8 modules:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Namespace separation through module hierarchy"}),"\n",(0,r.jsxs)(n.li,{children:["Dynamic module loading with ",(0,r.jsx)(n.code,{children:"master()->resolv()"})]}),"\n",(0,r.jsxs)(n.li,{children:["AutoDoc documentation system with ",(0,r.jsx)(n.code,{children:"//!"})," comments"]}),"\n",(0,r.jsxs)(n.li,{children:["Strict type checking with ",(0,r.jsx)(n.code,{children:"#pragma strict_types"})]}),"\n",(0,r.jsx)(n.li,{children:"Rich standard library (ADT, Sql, Protocols, Parser, etc.)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:"// Importing standard modules\nimport Array; // Import Array module\nimport ADT; // Import ADT module (Abstract Data Types)\nimport ADT.Struct; // Import specific submodule\nimport Sql.sql; // Import SQL interface\n\n// Using imported functions\narray arr = Array.shuffle(({1, 2, 3, 4, 5}));\nmapping m = ADT.Struct.map(...);\n\n// Qualified access without import\narray arr2 = Array.uniq(({1, 2, 2, 3}));\nobject table = ADT.Table.table(...);;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"defining-a-modules-interface",children:"Defining a Module's Interface"}),"\n",(0,r.jsxs)(n.p,{children:["Creating modules in Pike 8 involves defining ",(0,r.jsx)(n.code,{children:".pmod"})," files with clear public interfaces. Use ",(0,r.jsx)(n.code,{children:"//!"})," AutoDoc comments to document your interface."]}),"\n",(0,r.jsx)(n.p,{children:"Simple Module Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: MathTools.pmod\n//! Mathematical utility functions.\n//! This module provides common mathematical operations\n//! beyond the built-in arithmetic functions.\n\n#pragma strict_types\n#require constant(Constants.VERSION)\n\n// Public constants\nconstant PI = 3.141592653589793;\nconstant E = 2.718281828459045;\nconstant VERSION = "1.0.0";\n\n//! Calculate the factorial of a number.\n//! @param n\n//! Non-negative integer to calculate factorial for\n//! @returns\n//! Factorial of n (n!)\n//! @throws\n//! Error if n is negative or not an integer\nint(0..) factorial(int(0..) n) {\n    if (n <= 1) return 1;\n    return n * factorial(n - 1);\n}\n\n//! Calculate greatest common divisor using Euclidean algorithm.\n//! @param a\n//! First positive integer\n//! @param b\n//! Second positive integer\n//! @returns\n//! Greatest common divisor of a and b\nint(1..) gcd(int(1..) a, int(1..) b) {\n    while (b != 0) {\n        int temp = b;\n        b = a % b;\n        a = temp;\n    }\n    return a;\n}\n\n//! Check if a number is prime.\n//! @param n\n//! Integer to check for primality\n//! @returns\n//! True if n is prime, false otherwise\nbool is_prime(int n) {\n    if (n < 2) return false;\n    if (n == 2) return true;\n    if (n % 2 == 0) return false;\n\n    for (int i = 3; i * i <= n; i += 2) {\n        if (n % i == 0) return false;\n    }\n    return true;\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Using the Module:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: test_math.pike\n#pragma strict_types\n\nimport MathTools;\n\nint main() {\n    write("5! = %d\\n", factorial(5));        // 120\n    write("GCD(48, 18) = %d\\n", gcd(48, 18)); // 6\n    write("is_prime(17) = %s\\n", is_prime(17) ? "true" : "false");\n    write("PI = %.10f\\n", PI);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"creating-hierarchical-modules",children:"Creating Hierarchical Modules"}),"\n",(0,r.jsx)(n.p,{children:"Pike 8 supports nested module hierarchies using directories and submodules. Organize related functionality into logical groups."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Directory structure:\n// MyApp/\n//   MyApp.pmod\n//   Utils.pmod/\n//     String.pmod\n//     Math.pmod\n//   Database/\n//     Connection.pmod\n//     Query.pmod\n\n// File: MyApp.pmod\n#pragma strict_types\n\n//! Main application module.\nconstant VERSION = "2.0.0";\n\n// This makes Utils and Database available as MyApp.Utils and MyApp.Database\nimport .Utils;\nimport .Database;\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: MyApp/Utils/String.pmod\n#pragma strict_types\n\n//! String manipulation utilities.\n\n//! Convert string to title case.\nstring title_case(string s) {\n    return String.capitalize(lower_case(s));\n}\n\n//! Truncate string to maximum length with ellipsis.\nstring truncate(string s, int max_len) {\n    if (sizeof(s) <= max_len) return s;\n    return s[0..max_len-3] + "...";\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Using hierarchical modules\n#pragma strict_types\n\nimport MyApp.Utils.String;\nimport MyApp.Database.Connection;\n\nint main() {\n    string title = title_case("hello world");\n    write("%s\\n", title);  // "Hello World"\n\n    // Or use fully qualified names\n    string text = MyApp.Utils.String.truncate("This is a very long string", 10);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-module-loading-with-master-resolv",children:"Dynamic Module Loading with master()->resolv()"}),"\n",(0,r.jsxs)(n.p,{children:["Pike's master object provides dynamic module resolution through ",(0,r.jsx)(n.code,{children:"master()->resolv()"}),". This allows loading modules at runtime based on string names."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'#pragma strict_types\n\n//! Load a module dynamically by name.\n//! @param module_name\n//! Name of module to load (e.g., "ADT.Struct")\n//! @returns\n//! The loaded module or 0 if not found\nmixed load_module(string module_name) {\n    mixed module = master()->resolv(module_name);\n\n    if (!module) {\n        werror("Warning: Module \'%s\' not found\\n", module_name);\n    }\n\n    return module;\n}\n\n//! Call a function from a dynamically loaded module.\nmixed call_module_func(string module_name, string func_name, mixed... args) {\n    mixed module = load_module(module_name);\n\n    if (!module) {\n        return 0;\n    }\n\n    if (!has_prefix(func_name, "_") && has_value(indices(module), func_name)) {\n        return module[func_name](@args);\n    }\n\n    return 0;\n}\n\nint main() {\n    // Load Array module dynamically\n    object array_mod = load_module("Array");\n    if (array_mod) {\n        array result = Array.uniq(({1, 2, 2, 3, 3, 3}));\n        write("Uniq: %{%d, %}\\n", result);\n    }\n\n    // Call function dynamically\n    mixed result = call_module_func("Array", "shuffle", ({1, 2, 3, 4, 5}));\n    if (result) {\n        write("Shuffled: %{%d, %}\\n", result);\n    }\n\n    // Load from nested module\n    object struct_mod = load_module("ADT.Struct");\n    if (struct_mod) {\n        write("ADT.Struct loaded successfully\\n");\n    }\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"making-variables-private-to-a-module",children:"Making Variables Private to a Module"}),"\n",(0,r.jsxs)(n.p,{children:["Pike 8 uses lexical scoping and naming conventions to control visibility. Variables starting with underscore (",(0,r.jsx)(n.code,{children:"_"}),") are conventionally private."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: Auth.pmod\n#pragma strict_types\n\n// Private constants (convention: underscore prefix)\nprotected constant _MAX_ATTEMPTS = 3;\nprotected constant _TOKEN_EXPIRY = 3600;  // seconds\n\n// Private variables (use protected for module-level privacy)\nprotected mapping(string:int) _login_attempts = ([]);\n\n//! Public: Check authentication credentials.\nbool authenticate(string username, string password) {\n    if (_is_locked_out(username)) {\n        werror("Account locked: %s\\n", username);\n        return false;\n    }\n\n    bool success = _verify_password(username, password);\n\n    if (success) {\n        _login_attempts[username] = 0;\n    } else {\n        _login_attempts[username]++;\n    }\n\n    return success;\n}\n\n// Private helper function\nprotected bool _is_locked_out(string username) {\n    return _login_attempts[username] >= _MAX_ATTEMPTS;\n}\n\n// Private helper function\nprotected bool _verify_password(string username, string password) {\n    // In real implementation, check against database\n    return password != "password123";  // Simplified\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Using Private Module Members:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'#pragma strict_types\n\nimport Auth;\n\nint main() {\n    // Public function - works fine\n    bool result = authenticate("alice", "secret");\n    write("Auth: %s\\n", result ? "Success" : "Failed");\n\n    // Private members - not accessible\n    // int x = Auth._MAX_ATTEMPTS;     // Error: protected\n    // bool y = Auth._is_locked_out(); // Error: protected\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"controlling-module-symbol-visibility",children:"Controlling Module Symbol Visibility"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"#require"})," to enforce module dependencies and control which symbols are exported. This is Pike 8's modern approach to module interfaces."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: SecureConfig.pmod\n#pragma strict_types\n\n// Exported symbols - these define the public interface\npublic constant API_VERSION = "3.0";\npublic constant MAX_CONNECTIONS = 100;\n\n//! Get configuration value.\npublic mixed get(string key) {\n    return _config[key];\n}\n\n//! Set configuration value.\npublic void set(string key, mixed value) {\n    _config[key] = value;\n}\n\n// Internal storage - not exported\nprotected mapping(string:mixed) _config = ([]);\n\n// Private helper - not exported\nprotected void _load_defaults() {\n    _config = ([\n        "host": "localhost",\n        "port": 8080,\n        "debug": false,\n    ]);\n}\n\n// Initialize defaults when module loads\n_load_defaults();\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:"// Using #require to enforce module presence\n// File: Database.pmod\n#pragma strict_types\n\n// Compile error if Sql.sql is not available\n#require constant(Sql.sql)\n\n// Compile error if ADT.Struct.Table is not available\n#inherit ADT.Struct.Table:Table;\n\n//! Database connection wrapper.\nclass Connection {\n    inherit Sql.sql:sql;\n\n    protected string _dsn;\n\n    void create(string dsn) {\n        _dsn = dsn;\n        ::create(dsn);\n    }\n\n    // Additional wrapper methods here\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"autodoc-documentation-system",children:"AutoDoc Documentation System"}),"\n",(0,r.jsxs)(n.p,{children:["Pike 8 uses ",(0,r.jsx)(n.code,{children:"//!"})," comments for AutoDoc documentation. Generate HTML docs with ",(0,r.jsx)(n.code,{children:"pike -x extract_autodoc"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: StringUtils.pmod\n#pragma strict_types\n\n//! String processing utilities for data validation and formatting.\n//! @seealso\n//!   @url{https://pike.lysator.liu.se/docs/refdoc/predef_3A_3A/String.html@}\n//! @module\n//!   This module provides high-level string operations for common tasks\n//!   like email validation, slug generation, and text formatting.\n\n//! Validate email address format.\n//! @param email\n//! Email address to validate\n//! @returns\n//! true if email appears valid, false otherwise\n//! @example\n//! // Validate an email address\n//! if (StringUtils.is_valid_email("user@example.com")) {\n//!     write("Valid email\\n");\n//! }\n//! @note\n//! This only checks format, not deliverability.\nbool is_valid_email(string email) {\n    return Regexp.Psimple("^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\\\.[A-Z|a-z]{2,}$")->match(email);\n}\n\n//! Convert string to URL-friendly slug.\n//! @param text\n//! Text to convert\n//! @param maxlen\n//! Maximum length of slug (default: 50)\n//! @returns\n//! URL-safe slug string\n//! @example\n//! string slug = StringUtils.make_slug("Hello World!");\n//! // Result: "hello-world"\nstring make_slug(string text, int(1..) maxlen=50) {\n    string slug = lower_case(text);\n\n    // Replace non-alphanumeric with hyphens\n    slug = Regexp.replace("[^a-z0-9]+", slug, "-");\n\n    // Remove leading/trailing hyphens\n    slug = String.trim_all_whites(slug);\n    slug = trim(slug, "-");\n\n    // Truncate if too long\n    if (sizeof(slug) > maxlen) {\n        slug = slug[0..maxlen-1];\n    }\n\n    return slug;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"pike-8-standard-library-modules",children:"Pike 8 Standard Library Modules"}),"\n",(0,r.jsx)(n.p,{children:"Pike 8 includes a comprehensive standard library. Here are the most commonly used modules:"}),"\n",(0,r.jsx)(n.h3,{id:"adt-abstract-data-types",children:"ADT (Abstract Data Types):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'#pragma strict_types\n\nimport ADT; // Import all ADT submodules\n\nint main() {\n    // ADT.Struct - Define structured data types\n    struct Person {\n        string name;\n        int age;\n        string email;\n    };\n\n    Person p = Person("Alice", 30, "alice@example.com");\n    write("Person: %s, age %d\\n", p->name, p->age);\n\n    // ADT.Table - Spreadsheet-like data structure\n    object table = ADT.Table.table((\n        ({"Name", "Age", "City"}),\n        ({"Alice", 30, "NYC"}),\n        ({"Bob", 25, "LA"}),\n    ));\n\n    write("Table rows: %d\\n", table->num_rows());\n\n    // ADT.Heap - Priority queue\n    object heap = ADT.Heap.priorities();\n    heap->push("low", 1);\n    heap->push("high", 10);\n    write("Heap pop: %s\\n", heap->pop());  // "high"\n\n    // ADT.Set - Mathematical set operations\n    object set = ADT.Set();\n    set->add("apple");\n    set->add("banana");\n    set->add("apple");  // Duplicate ignored\n\n    write("Set contains: %{%s, %}\\n", set->cast("array"));\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sql-module---database-connectivity",children:"Sql Module - Database Connectivity:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'#pragma strict_types\n\nimport Sql.sql;\n\nint main() {\n    // SQLite connection (embedded database)\n    object db = Sql.sql("sqlite://test.db");\n\n    // Create table\n    db->query("CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY,\n        name TEXT NOT NULL,\n        email TEXT UNIQUE\n    )");\n\n    // Insert data (using parameter binding for security)\n    db->query("INSERT INTO users (name, email) VALUES (%s, %s)",\n              "Alice", "alice@example.com");\n\n    // Query data\n    object result = db->query("SELECT * FROM users");\n\n    // Iterate through results\n    foreach (result; int i; mapping row) {\n        write("User %d: %s (%s)\\n",\n               row->id, row->name, row->email);\n    }\n\n    // Transaction handling\n    mixed error = catch {\n        db->query("BEGIN");\n        db->query("INSERT INTO users (name, email) VALUES (%s, %s)",\n                  "Bob", "bob@example.com");\n        db->query("COMMIT");\n    };\n\n    if (error) {\n        db->query("ROLLBACK");\n        werror("Transaction failed: %s\\n", describe_error(error));\n    }\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"protocols-module---network-protocols",children:"Protocols Module - Network Protocols:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'#pragma strict_types\n\nimport Protocols.HTTP;\nimport Protocols.DNS;\n\nint main() {\n    // HTTP GET request\n    object req = get_url("https://pike.lysator.liu.se/");\n    if (req) {\n        write("Status: %d\\n", req->status_code);\n        write("Body length: %d\\n", sizeof(req->body));\n    }\n\n    // DNS query\n    object dns = Protocols.DNS.client();\n    mapping result = dns->gethostbyname("example.com");\n    write("IP addresses: %{%s, %}\\n", result->ip || ({}));\n\n    // HTTP POST with JSON\n    mapping data = ([\n        "name": "Alice",\n        "age": 30,\n    ]);\n    string json = Standards.JSON.encode(data);\n\n    object post_req = post_url(\n        "https://api.example.com/users",\n        ([\n            "Content-Type": "application/json",\n        ]),\n        json\n    );\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"module-dependencies-and-versioning",children:"Module Dependencies and Versioning"}),"\n",(0,r.jsxs)(n.p,{children:["Pike 8 provides mechanisms to manage module dependencies and ensure compatibility. Use constants for versioning and ",(0,r.jsx)(n.code,{children:"#require"})," for dependency checking."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: AppConfig.pmod\n#pragma strict_types\n\n// Version information\nconstant VERSION = "1.2.0";\nconstant PIKE_MIN_VERSION = "8.0";\n\n// Required modules - compile error if not available\n#require constant(__VERSION__) >= 8.0\n\n//! Check if module version meets requirements.\nbool version_at_least(string required_version) {\n    array current = map(VERSION / ".", String.trim_all_whites);\n    array required = map(required_version / ".", String.trim_all_whites);\n\n    for (int i = 0; i < sizeof(required); i++) {\n        if ((int)current[i] < (int)required[i])\n            return false;\n        if ((int)current[i] > (int)required[i])\n            return true;\n    }\n    return true;\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Module with Dependency Resolution:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: DataProcessor.pmod\n#pragma strict_types\n\n// Optional dependencies with graceful fallback\nobject crypto_module;\n\nmixed error = catch {\n    crypto_module = master()->resolv("Crypto.Hash.MD5");\n};\n\nconstant HAS_CRYPTO = !zero_type(crypto_module);\n\n//! Process data with optional encryption.\nstring process(string data, bool|void encrypt) {\n    string result = String.trim_all_whites(data);\n\n    if (encrypt && HAS_CRYPTO) {\n        // Use Crypto module if available\n        result = crypto_module->hash(result);\n    } else if (encrypt) {\n        werror("Warning: Crypto module not available, skipping encryption\\n");\n    }\n\n    return result;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-for-module-organization",children:"Best Practices for Module Organization"}),"\n",(0,r.jsx)(n.p,{children:"Follow these conventions for clean, maintainable Pike 8 modules:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"#pragma strict_types"})," - Always enable strict typing for better error detection"]}),"\n",(0,r.jsxs)(n.li,{children:["Document with AutoDoc - Use ",(0,r.jsx)(n.code,{children:"//!"})," comments for all public interfaces"]}),"\n",(0,r.jsxs)(n.li,{children:["Name private members with underscore - Prefix internal functions and variables with ",(0,r.jsx)(n.code,{children:"_"})]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"protected"})," for module-level privacy - Controls symbol visibility"]}),"\n",(0,r.jsx)(n.li,{children:"Organize by feature, not type - Group related functionality together"}),"\n",(0,r.jsx)(n.li,{children:"Keep modules focused - Each module should have a single, clear responsibility"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// Recommended module structure:\n// MyApp/\n//   MyApp.pmod              # Main module (constants, version)\n//   Core.pmod/              # Core functionality\n//     Database.pmod         # Database layer\n//     Cache.pmod            # Caching layer\n//   Utils.pmod/             # Utilities (can be used independently)\n//     String.pmod\n//     Time.pmod\n//   Services.pmod/          # Business logic\n//     Auth.pmod             # Authentication\n//     Email.pmod            # Email handling\n\n// File: MyApp.pmod\n//! MyApp - Application framework.\n\n#pragma strict_types\n\nconstant VERSION = "1.0.0";\nconstant API_LEVEL = 3;\n\n// Export commonly used functionality\nimport .Core.Database;\nimport .Services.Auth;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-module-example-logger",children:"Complete Module Example: Logger"}),"\n",(0,r.jsx)(n.p,{children:"Here's a complete, production-ready logger module demonstrating Pike 8 best practices:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: Logger.pmod\n//! Flexible logging module with multiple output handlers.\n//! @example\n//! // Basic usage\n//! import Logger;\n//! Logger.info("Application started");\n//! Logger.error("Database connection failed");\n\n#pragma strict_types\n\n// Log levels\nconstant DEBUG = 0;\nconstant INFO = 1;\nconstant WARNING = 2;\nconstant ERROR = 3;\n\n// Configuration\nprotected int _min_level = INFO;\nprotected string _log_file = "";\nprotected bool _use_stderr = true;\nprotected bool _use_timestamp = true;\nprotected bool _use_colors = true;\n\n//! Set minimum log level.\nvoid set_level(int level) {\n    _min_level = level;\n}\n\n//! Enable file logging.\nvoid set_log_file(string path) {\n    _log_file = path;\n}\n\n//! Enable/disable stderr output.\nvoid set_use_stderr(bool enabled) {\n    _use_stderr = enabled;\n}\n\n//! Enable/disable timestamps in logs.\nvoid set_use_timestamp(bool enabled) {\n    _use_timestamp = enabled;\n}\n\n//! Enable/disable terminal colors.\nvoid set_use_colors(bool enabled) {\n    _use_colors = enabled;\n}\n\n//! Log a debug message.\nvoid debug(string msg, mixed... args) {\n    _log(DEBUG, "DEBUG", msg, @args);\n}\n\n//! Log an info message.\nvoid info(string msg, mixed... args) {\n    _log(INFO, "INFO", msg, @args);\n}\n\n//! Log a warning message.\nvoid warning(string msg, mixed... args) {\n    _log(WARNING, "WARNING", msg, @args);\n}\n\n//! Log an error message.\nvoid error(string msg, mixed... args) {\n    _log(ERROR, "ERROR", msg, @args);\n}\n\n// Internal logging implementation\nprotected void _log(int level, string level_name, string msg, mixed... args) {\n    if (level < _min_level) return;\n\n    // Format message\n    string formatted = sprintf(msg, @args);\n\n    // Add timestamp\n    if (_use_timestamp) {\n        string ts = Calendar.ISO.now()->format_time();\n        formatted = sprintf("[%s] [%s] %s", ts, level_name, formatted);\n    } else {\n        formatted = sprintf("[%s] %s", level_name, formatted);\n    }\n\n    // Add colors for terminal\n    if (_use_colors) {\n        formatted = _colorize(level, formatted);\n    }\n\n    // Output to stderr\n    if (_use_stderr) {\n        werror("%s\\n", formatted);\n    }\n\n    // Output to file\n    if (_log_file != "") {\n        object f = Stdio.append_file(_log_file);\n        if (f) {\n            // Strip ANSI colors for file output\n            string clean = _strip_colors(formatted);\n            f->write("%s\\n", clean);\n            f->close();\n        }\n    }\n}\n\nprotected string _colorize(int level, string msg) {\n    switch(level) {\n        case DEBUG:\n            return sprintf("\\033[0;36m%s\\033[0m", msg);  // Cyan\n\n        case INFO:\n            return sprintf("\\033[0;32m%s\\033[0m", msg);   // Green\n\n        case WARNING:\n            return sprintf("\\033[0;33m%s\\033[0m", msg);  // Yellow\n\n        case ERROR:\n            return sprintf("\\033[0;31m%s\\033[0m", msg);   // Red\n\n        default:\n            return msg;\n    }\n}\n\nprotected string _strip_colors(string msg) {\n    // Remove ANSI escape sequences\n    return Regexp.replace("\\033\\\\[[0-9;]*m", msg, "");\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Using the Logger Module:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-pike",children:'// File: app.pike\n#pragma strict_types\n\nimport Logger;\n\nint main(int argc, array(string) argv) {\n    // Configure logger\n    if (argc > 1 && argv[1] == "--verbose") {\n        set_level(DEBUG);\n    }\n\n    set_log_file("app.log");\n\n    // Use logger\n    info("Application starting");\n\n    debug("Processing %d items", 42);\n\n    warning("Configuration file not found, using defaults");\n\n    error("Failed to connect to database: %s", "connection timeout");\n\n    info("Application shutting down");\n\n    return 0;\n}\n'})})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);