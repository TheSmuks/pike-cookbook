"use strict";(self.webpackChunkpike_cookbook=self.webpackChunkpike_cookbook||[]).push([[389],{3538(n,e,t){t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"basics/strings","title":"Strings","description":"Introduction","source":"@site/docs/basics/strings.md","sourceDirName":"basics","slug":"/basics/strings","permalink":"/pike-cookbook/docs/basics/strings","draft":false,"unlisted":false,"editUrl":"https://github.com/smuks/pike-cookbook/tree/main/docs/basics/strings.md","tags":[],"version":"current","frontMatter":{"id":"strings","title":"Strings","sidebar_label":"Strings"},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/pike-cookbook/docs/intro"},"next":{"title":"Numbers","permalink":"/pike-cookbook/docs/basics/numbers"}}');var r=t(4848),s=t(8453);const a={id:"strings",title:"Strings",sidebar_label:"Strings"},o=void 0,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Accessing Substrings",id:"accessing-substrings",level:2},{value:"Exchanging Values Without Using Temporary Variables",id:"exchanging-values-without-using-temporary-variables",level:2},{value:"Converting Between ASCII Characters and Values",id:"converting-between-ascii-characters-and-values",level:2},{value:"Modern String Processing",id:"modern-string-processing",level:2},{value:"Modern String Iteration with Pike 8",id:"modern-string-iteration-with-pike-8",level:2}];function d(n){const e={code:"code",h2:"h2",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Strings in Pike 8 - Modern Implementation\n// Using String.pmod with strict types and modern features\n\n//-----------------------------\n// Modern string imports for enhanced functionality\nimport String;\nimport Array;\n\n// Pike 8 string constants and features\nconstant Buffer = __builtin.Buffer;\nconstant Iterator = __builtin.string_iterator;\nconstant SplitIterator = __builtin.string_split_iterator;\n\n// Basic string declarations (unchanged but documented)\nstring str;                     // declare a variable of type string\nstr = "\\n";                    // a "newline" character\nstr = "Jon \\"Maddog\\" Orwant";  // literal double quotes\n//-----------------------------\n\n// Pike 8: Multiline strings with here document syntax\nstr =\n#"This is a multiline string\nterminated by a double-quote like any other string";\n\n//-----------------------------\n// Modern Pike 8 String Operations\n//-----------------------------\n\n// String length and modern utility functions\nint len = sizeof(str);                   // modern way to get length\nstring trimmed = trim_whites(str);         // String.pmod trim\nstring normalized = normalize_space(str); // String.pmod normalize\n\n// Unicode-aware operations\nstring clean = filter_non_unicode(str);    // Filter out non-unicode chars\n\n//-----------------------------\n// Modern String Formatting\n//-----------------------------\n\n// Using modern sprintf with Pike 8 features\nstring formatted = sprintf("Hello %s, you have %d messages",\n                           "Alice", 42);\n\n// Memory size formatting (Pike 8 feature)\nint bytes = 1024 * 1024 * 5;  // 5MB\nstring size_str = int2size(bytes);\n// "5.0 MB"\n//-----------------------------\n'})}),"\n",(0,r.jsx)(e.h2,{id:"accessing-substrings",children:"Accessing Substrings"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Recipe 1.1: Accessing Substrings - Modern Pike 8\n//-----------------------------\n\nstring str = "This is what you have";\nstring first, start, rest, last, end, piece;\nint t;\n\n// Basic substring access (Pike syntax)\nfirst = str[0..0];                     // "T"\nstart = str[5..5+1];               // "is"\nrest  = str[13..];                  // "you have"\nlast  = str[sizeof(str)-1..sizeof(str)-1];  // "e"\nend   = str[sizeof(str)-4..];        // "have"\npiece = str[sizeof(str)-8..sizeof(str)-8+2]; // "you"\n\n//-----------------------------\n// Recipe 1.2: Extracting Multiple Parts\n//-----------------------------\n\n// Using sscanf for structured extraction\nstring name = "John Doe, 30";\nstring first_name, last_name;\nint age;\n\nif (sscanf(name, "%s %s, %d", first_name, last_name, age) == 3) {\n    write("Name: %s %s, Age: %d\\n", first_name, last_name, age);\n}\n\n// Using array_sscanf for complex patterns\nstring data = "Header:Important:Data:12345";\narray(string) parts = array_sscanf(data, "%[^:]:%[^:]:%[^:]:%s");\n// ({ "Header", "Important", "Data", "12345" })\n\n//-----------------------------\n// Recipe 1.3: Splitting Strings\n//-----------------------------\n\n// Split at character boundaries\narray(string) fivers = str/5;\n// Split into 5-character chunks\n\n// Split into individual characters\narray(string) chars = str/"";\n\n// Using modern String.pmod splitting\nstring text = "  word1  word2  word3  ";\narray(string) words = normalize_space(text)/" ";\n// ({ "word1", "word2", "word3" })\n//-----------------------------\n'})}),"\n",(0,r.jsx)(e.h2,{id:"exchanging-values-without-using-temporary-variables",children:"Exchanging Values Without Using Temporary Variables"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Recipe 1.4: Value Exchange - Pike 8 Modern Patterns\n//-----------------------------\n\n// Classic array swap (unchanged)\n[var1, var2] = ({ var2, var1 });\n\n// Modern Pike 8 functional approach\nvoid swap_vars(ref string a, ref string b) {\n    [a, b] = ({ b, a });\n}\n\n// Example usage\nstring a = "alpha";\nstring b = "omega";\n\n// Multiple value assignment and swap\n[a, b] = ({ b, a });\n\n// Array-based operations\narray(string) months = ({"January", "March", "August"});\nstring alpha = months[0];\nstring beta = months[1];\nstring production = months[2];\n\n// Rotate array elements\n[alpha, beta, production] = ({ beta, production, alpha });\n//-----------------------------\n'})}),"\n",(0,r.jsx)(e.h2,{id:"converting-between-ascii-characters-and-values",children:"Converting Between ASCII Characters and Values"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Recipe 1.5: Character/ASCII Conversion - Pike 8 Modern\n//-----------------------------\n\n// Pike 8: Character to integer conversion\nint char_code = \'a\';                    // ASCII value of \'a\'\nint newline_code = \'\\n\';             // ASCII value of newline\n\n// Integer to character conversion using String.pmod\nstring char_from_code = String.int2char(char_code);\n\n// Alternative using sprintf (compatible)\nstring char_from_sprintf = sprintf("%c", char_code);\n\n// Demonstration\nwrite("Number %d is character %c\\n", char_code, char_code);\n\n// Modern Pike 8: Convert entire string to ASCII array\nstring text = "sample";\narray(int) ascii_values = (array(int))text;\n\n// Convert back to string\nstring reconstructed = (string)ascii_values;\n\nwrite("Original: %s, ASCII: %s, Reconstructed: %s\\n",\n               text, ascii_values*" ", reconstructed);\n\n//-----------------------------\n// Recipe 1.6: Unicode Character Handling\n//-----------------------------\n\n// Pike 8: Handle Unicode characters properly\nstring unicode_str = "H\xe9llo \u4e16\u754c";\n\n// Extract Unicode characters\narray(string) unicode_chars = unicode_str/"";\n\n// Filter using modern functions\nstring ascii_only = filter_non_unicode(unicode_str);\n\n// String width calculation (for display)\nint display_width = String.width(unicode_str);\n//-----------------------------\n'})}),"\n",(0,r.jsx)(e.h2,{id:"modern-string-processing",children:"Modern String Processing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Recipe 1.7: Advanced String Processing with Pike 8\n//-----------------------------\n\n// Using String.pmod functions for efficiency\nstring messy = "  Hello   World!  ";\n\n// Multiple whitespace trimming options\nstring trimmed_basic = trim_whites(messy);           // "Hello   World!"\nstring trimmed_all = trim_all_whites(messy);        // "Hello World!"\nstring normalized = normalize_space(messy);      // "Hello World!"\n\n//-----------------------------\n// Recipe 1.8: String Building and Buffer Operations\n//-----------------------------\n\n// Using Buffer for efficient string building\nBuffer buffer = Buffer();\nbuffer->add("Processing: ");\nbuffer->add(trimmed_basic);\nbuffer->add("\\nResult: ");\n\nstring result = buffer->get();\n\n//-----------------------------\n// Recipe 1.9: String Iteration and Processing\n//-----------------------------\n\n// Using String Iterator for character-by-character processing\nstring input = "Hello, World!";\nString.Iterator iterator = Iterator(input);\n\nstring filtered = "";\nwhile (iterator->index() < sizeof(iterator->value())) {\n    string c = iterator->value()[iterator->index()];\n    if (c != \',\' && c != \'!\')\n        filtered += c;\n    iterator->next();\n}\n\n//-----------------------------\n// Recipe 1.10: String Comparison and Matching\n//-----------------------------\n\n// Using modern comparison functions\nstring s1 = "hello";\nstring s2 = "Hello";\n\n// Case-sensitive comparison\nint compare_result = s1 == s2;  // 0 (false)\n\n// Case-insensitive comparison\nint case_insensitive = lower_case(s1) == lower_case(s2);  // 1 (true)\n\n// Using String.pmod functions\nint similarity = String.fuzzymatch(s1, s2);\nint distance = String.levenshtein_distance(s1, s2);\n\nwrite("Strings: \'%s\' and \'%s\'\\n", s1, s2);\nwrite("Similarity: %d%%, Distance: %d\\n", similarity, distance);\n\n//-----------------------------\n// Recipe 1.11: Reversing Strings - Pike 8 Modern\n//-----------------------------\n\n// Character-by-character reversal using modern String.pmod\nstring text = "Hello, World!";\nstring reversed = String.reverse(text);\n\n// Word-by-word reversal with modern split/join\nstring sentence = "The quick brown fox";\narray(string) words = sentence/" ";\narray(string) reversed_words = reverse(words);\nstring reversed_sentence = reversed_words*" ";\n\n// Using Buffer for efficient reversal\nBuffer buffer = Buffer();\nforeach(reverse(text/""), string char) {\n    buffer->add(char);\n}\n\nwrite("Original: %s\\nReversed: %s\\n", text, reversed);\n\n//-----------------------------\n// Recipe 1.12: Case Manipulation - Pike 8 Unicode\n//-----------------------------\n\n// Unicode-aware case conversion\nstring mixed_case = "H\xe9llo \u4e16\u754c 123";\n\n// Modern String.pmod functions\nstring upper = upper_case(mixed_case);        // "H\xc9LLO \u4e16\u754c 123"\nstring lower = lower_case(mixed_case);        // "h\xe9llo \u4e16\u754c 123"\nstring title = String.capitalize(mixed_case);    // First character uppercase\n\n// Case mapping with locale support\nstring upper_locale = String.upper_case(mixed_case, "UTF-8");\n\nwrite("Original: %s\\nUpper: %s\\nLower: %s\\n",\n           mixed_case, upper, lower);\n\n//-----------------------------\n// Recipe 1.13: Pattern Matching with Regex - Pike 8\n//-----------------------------\n\n// Modern regular expressions with Pike 8\nstring email = "user@example.com";\narray matches = Regexp("([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,})")->match(email);\n\nif (matches) {\n    write("Email: %s\\nUsername: %s\\nDomain: %s\\n",\n               matches[0], matches[1], matches[2]);\n}\n\n// Using sscanf for complex patterns\nstring log_entry = "2023-01-15 14:30:25 INFO: User login successful";\nstring date, time, level, message;\n\nif (sscanf(log_entry, "%s %s %[^:]: %s", date, time, level, message) == 4) {\n    write("Date: %s, Time: %s, Level: %s\\n", date, time, level);\n}\n\n//-----------------------------\n// Recipe 1.14: String Searching and Substitution\n//-----------------------------\n\n// Modern search and replace functions\nstring text = "The quick brown fox jumps over the lazy dog";\n\n// Find and replace with modern String.pmod\nstring replaced = String.replace(text, "fox", "cat");\n\n// Multiple replacements with mapping\nmapping replacements = ([\n    "quick": "fast",\n    "brown": "red",\n    "lazy": "sleeping"\n]);\n\nstring multi_replaced = text;\nforeach(indices(replacements), string key) {\n    multi_replaced = String.replace(multi_replaced, key, replacements[key]);\n}\n\n// Pattern-based removal\nstring cleaned = String.replace(text, Regexp("\\\\bthe\\\\b"), "");\n\nwrite("Original: %s\\nReplaced: %s\\nCleaned: %s\\n",\n           text, replaced, cleaned);\n\n//-----------------------------\n// Recipe 1.15: String Splitting and Joining\n//-----------------------------\n\n// Advanced splitting with modern functions\nstring csv_data = "name,age,city\\nJohn,30,New York\\nJane,25,London";\narray(string) lines = csv_data/"\\n";\n\narray rows = ({});\nforeach(lines, string line) {\n    if (line != "")\n        rows += ({ String.split(line, ",") });\n}\n\n// Join with custom delimiters and formatting\narray(string) data = ({"Alice", "Bob", "Charlie"});\n\nstring comma_separated = data*", ";\nstring html_list = "<ul>" +\n                     (data/"</li>\\n<li>")*"" +\n                     "</li></ul>";\n\n//-----------------------------\n// Recipe 1.16: Unicode and UTF-8 Processing\n//-----------------------------\n\n// Advanced Unicode handling with Pike 8\nstring unicode_text = "Caf\xe9, na\xefve, r\xe9sum\xe9, \u5317\u4eac, \u041c\u043e\u0441\u043a\u0432\u0430";\n\n// Unicode normalization\nstring nfc_normalized = String.normalize(unicode_text, "NFC");\nstring nfd_normalized = String.normalize(unicode_text, "NFD");\n\n// Character properties and classification\nint char_count = String.length(unicode_text);\nint byte_length = sizeof(unicode_text);\n\n// Extract Unicode scripts\narray scripts = String.get_scripts(unicode_text);\n\nwrite("Unicode text: %s\\nCharacters: %d, Bytes: %d\\n",\n           unicode_text, char_count, byte_length);\n\n//-----------------------------\n// Recipe 1.17: String Validation and Sanitization\n//-----------------------------\n\n// Modern string validation and security\nstring input = "  Hello! <script>alert(\'xss\')<\/script>  ";\n\n// Sanitize HTML content\nstring sanitized = String.html_encode(input);\n\n// Validate email format\nbool is_valid_email = Regexp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$")->match(input);\n\n// Clean and trim input\nstring clean_input = normalize_space(input);\n\n//-----------------------------\n// Recipe 1.18: String Interpolation and Formatting\n//-----------------------------\n\n// Advanced string formatting in Pike 8\nmapping context = ([\n    "name": "Alice",\n    "age": 30,\n    "city": "New York",\n    "active": true\n]);\n\n// Modern sprintf with Pike 8 features\nstring formatted = sprintf("Name: %s, Age: %d, City: %s, Active: %s",\n                          context->name,\n                          context->age,\n                          context->city,\n                          context->active ? "Yes" : "No");\n\n// Template-based interpolation\nstring template = "Welcome @name! You are @age years old in @city.";\nstring interpolated = String.template(template, context);\n\n//-----------------------------\n// Recipe 1.19: Performance Optimization with Buffers\n//-----------------------------\n\n// Efficient string building with Buffer objects\nBuffer output_buffer = Buffer();\n\n// Pre-allocate for better performance\noutput_buffer->set_preallocate(1024);\n\n// Efficient string building\nfor (int i = 0; i < 1000; i++) {\n    output_buffer->add(sprintf("Line %d: %s\\n", i, String.random_string(10)));\n}\n\nstring large_result = output_buffer->get();\n//-----------------------------\n'})}),"\n",(0,r.jsx)(e.h2,{id:"modern-string-iteration-with-pike-8",children:"Modern String Iteration with Pike 8"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pike",children:'// Using String Iterator for advanced processing\nstring text = "Advanced Pike 8 String Processing";\nString.Iterator iterator = String.Iterator(text);\n\narray chars = ({});\nwhile (iterator->index() < sizeof(iterator->value())) {\n    chars += ({ iterator->value()[iterator->index()] });\n    iterator->next();\n}\n\n// Split Iterator for tokenization\nString.SplitIterator split_iter = String.SplitIterator(text, " ");\narray tokens = ({});\n\nwhile (split_iter->index() < sizeof(split_iter->value())) {\n    tokens += ({ split_iter->value()[split_iter->index()] });\n    split_iter->next();\n}\n\n//-----------------------------\n// Memory Management and Performance\n//-----------------------------\n\n// String memory optimization in Pike 8\nstring large_string = String.repeat("x", 1000000);\n\n// Copy-on-write optimization\nstring copy = large_string;\ncopy[0] = "y";  // Efficient copy-on-write kick in\n\n// String chunking for memory efficiency\narray chunks = chunk_string(large_string, 4096);\n\n//-----------------------------\n// Error Handling and Validation\n//-----------------------------\n\n// Safe string operations with Pike 8\nmixed safe_index(mixed str, int index) {\n    if (objectp(str) && str->is_string() &&\n        index >= 0 && index < sizeof(str)) {\n        return str[index];\n    }\n    return null;\n}\n\n// String validation with type checking\nbool is_valid_string(mixed value) {\n    return stringp(value) && sizeof(value) > 0;\n}\n\n//-----------------------------\n// Modern String Comparison and Sorting\n//-----------------------------\n\n// Advanced string comparison with Pike 8\narray(string) strings = ({"apple", "Banana", "cherry", "Date", "elderberry"});\n\n// Case-insensitive sorting\narray sorted_case_insensitive = sort(strings);\n\n// Unicode-aware sorting\narray sorted_unicode = String.sort_unicode(strings);\n\n// Custom comparison function\narray sorted_custom = sort(strings,\n    lambda(string a, string b) {\n        return sizeof(a) < sizeof(b);\n    });\n\nwrite("Original: %s\\nSorted (case-insensitive): %s\\n",\n           strings*", ", sorted_case_insensitive*", ");\n//-----------------------------\n// String Utilities and Helper Functions\n//-----------------------------\n\n// Common string utility functions\nstring utils_demo(string input) {\n    string result = "";\n\n    // Chaining modern functions\n    result = String.trim(input)\n             ->upper_case()\n             ->replace(" ", "_")\n             ->truncate(50);\n\n    return result;\n}\n\n//-----------------------------\n// Conclusion: Modern Pike 8 String Processing\n//-----------------------------\n\n// Summary of modern string features in Pike 8:\n// \u2022 String.pmod with comprehensive utilities\n// \u2022 Full Unicode and UTF-8 support\n// \u2022 Efficient Buffer operations\n// \u2022 Modern regex patterns\n// \u2022 Safe string operations with type checking\n// \u2022 Performance optimizations\n// \u2022 Strict type compliance with #pragma strict_types\n//-----------------------------\n'})})]})}function g(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>a,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function a(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);